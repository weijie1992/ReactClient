[{"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\index.js":"1","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\App.js":"2","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reportWebVitals.js":"3","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\Home.js":"4","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\nav\\Header.js":"5","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\Login.js":"6","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\Register.js":"7","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\Cart.js":"8","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\auth.js":"9","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\UserActivate.js":"10","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\index.js":"11","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\userReducer.js":"12","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\ForgetPassword.js":"13","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\ResetPassword.js":"14","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\helper\\setBearerToken.js":"15","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\Footer.js":"16","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\privateRoutes\\UserRoute.js":"17","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\user\\PurchaseHistory.js":"18","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\privateRoutes\\RedirectIfNotSignIn.js":"19","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\nav\\UserSideBar.js":"20","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\user\\Wishlist.js":"21","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\user\\Profile.js":"22","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\user\\UpdatePassword.js":"23","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\user.js":"24","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\privateRoutes\\AdminRoute.js":"25","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\AdminDashboard.js":"26","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\admin.js":"27","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\helper\\getRefreshToken.js":"28","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\nav\\AdminSideBar.js":"29","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\CreateCategory.js":"30","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\category.js":"31","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\FilterQuery.js":"32","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\CreateSubCategory.js":"33","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\subCategory.js":"34","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\CreateProduct.js":"35","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\shipping.js":"36","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\product.js":"37","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\ViewAllProducts.js":"38","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\UpdateProduct.js":"39","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\ProductCard.js":"40","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\LoadingCard.js":"41","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\LatestCookies.js":"42","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\BestSellers.js":"43","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\ProductDetails.js":"44","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\searchReducer.js":"45","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\SearchQuery.js":"46","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\SubCategory.js":"47","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\nav\\SearchSideBar.js":"48","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\Search.js":"49","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\cartReducer.js":"50","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\cartModalReducer.js":"51","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\nav\\CartModal.js":"52","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\showModalProductReducer.js":"53","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\cart.js":"54"},{"size":1144,"mtime":1616684406357,"results":"55","hashOfConfig":"56"},{"size":6804,"mtime":1616686908631,"results":"57","hashOfConfig":"56"},{"size":362,"mtime":499162500000,"results":"58","hashOfConfig":"56"},{"size":956,"mtime":1613396238784,"results":"59","hashOfConfig":"56"},{"size":6809,"mtime":1616231966049,"results":"60","hashOfConfig":"56"},{"size":10205,"mtime":1616337536879,"results":"61","hashOfConfig":"56"},{"size":3896,"mtime":1610462257141,"results":"62","hashOfConfig":"56"},{"size":14149,"mtime":1616680796014,"results":"63","hashOfConfig":"56"},{"size":1782,"mtime":1610281369338,"results":"64","hashOfConfig":"56"},{"size":7615,"mtime":1610462176445,"results":"65","hashOfConfig":"56"},{"size":533,"mtime":1616076515326,"results":"66","hashOfConfig":"56"},{"size":2038,"mtime":1616685455112,"results":"67","hashOfConfig":"56"},{"size":3503,"mtime":1610462407265,"results":"68","hashOfConfig":"56"},{"size":6494,"mtime":1610462215868,"results":"69","hashOfConfig":"56"},{"size":280,"mtime":1609674810035,"results":"70","hashOfConfig":"56"},{"size":1370,"mtime":1613917857337,"results":"71","hashOfConfig":"56"},{"size":403,"mtime":1610197768878,"results":"72","hashOfConfig":"56"},{"size":409,"mtime":1610200142712,"results":"73","hashOfConfig":"56"},{"size":830,"mtime":1610198819283,"results":"74","hashOfConfig":"56"},{"size":767,"mtime":1610461991031,"results":"75","hashOfConfig":"56"},{"size":396,"mtime":1610202086659,"results":"76","hashOfConfig":"56"},{"size":393,"mtime":1610202023441,"results":"77","hashOfConfig":"56"},{"size":9405,"mtime":1610462453018,"results":"78","hashOfConfig":"56"},{"size":319,"mtime":1610208629112,"results":"79","hashOfConfig":"56"},{"size":2371,"mtime":1616684404684,"results":"80","hashOfConfig":"56"},{"size":436,"mtime":1610894150630,"results":"81","hashOfConfig":"56"},{"size":246,"mtime":1610443151179,"results":"82","hashOfConfig":"56"},{"size":355,"mtime":1610441662109,"results":"83","hashOfConfig":"56"},{"size":927,"mtime":1613303801809,"results":"84","hashOfConfig":"56"},{"size":10425,"mtime":1612624227720,"results":"85","hashOfConfig":"56"},{"size":959,"mtime":1610545466752,"results":"86","hashOfConfig":"56"},{"size":444,"mtime":1610552340954,"results":"87","hashOfConfig":"56"},{"size":12840,"mtime":1611326553227,"results":"88","hashOfConfig":"56"},{"size":992,"mtime":1614603231287,"results":"89","hashOfConfig":"56"},{"size":14283,"mtime":1614515329625,"results":"90","hashOfConfig":"56"},{"size":167,"mtime":1611245998235,"results":"91","hashOfConfig":"56"},{"size":3140,"mtime":1616677363705,"results":"92","hashOfConfig":"56"},{"size":7345,"mtime":1614605896085,"results":"93","hashOfConfig":"56"},{"size":18583,"mtime":1614515318460,"results":"94","hashOfConfig":"56"},{"size":9069,"mtime":1616511991110,"results":"95","hashOfConfig":"56"},{"size":625,"mtime":1613309995440,"results":"96","hashOfConfig":"56"},{"size":2198,"mtime":1613397200547,"results":"97","hashOfConfig":"56"},{"size":2190,"mtime":1613397218457,"results":"98","hashOfConfig":"56"},{"size":13492,"mtime":1616680623854,"results":"99","hashOfConfig":"56"},{"size":387,"mtime":1616334756238,"results":"100","hashOfConfig":"56"},{"size":1160,"mtime":1615629767419,"results":"101","hashOfConfig":"56"},{"size":5888,"mtime":1615632641915,"results":"102","hashOfConfig":"56"},{"size":4895,"mtime":1615630504349,"results":"103","hashOfConfig":"56"},{"size":5381,"mtime":1615631979671,"results":"104","hashOfConfig":"56"},{"size":947,"mtime":1616766905615,"results":"105","hashOfConfig":"56"},{"size":214,"mtime":1616334752701,"results":"106","hashOfConfig":"56"},{"size":3348,"mtime":1616080465522,"results":"107","hashOfConfig":"56"},{"size":281,"mtime":1616334607516,"results":"108","hashOfConfig":"56"},{"size":1017,"mtime":1616594100784,"results":"109","hashOfConfig":"56"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},"hjg0p7",{"filePath":"113","messages":"114","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"115","usedDeprecatedRules":"112"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"120","usedDeprecatedRules":"112"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"123","usedDeprecatedRules":"112"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"126","usedDeprecatedRules":"112"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"129","usedDeprecatedRules":"112"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"132","usedDeprecatedRules":"112"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"137","usedDeprecatedRules":"112"},{"filePath":"138","messages":"139","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"140","messages":"141","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"142","messages":"143","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"144","usedDeprecatedRules":"112"},{"filePath":"145","messages":"146","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"147","usedDeprecatedRules":"112"},{"filePath":"148","messages":"149","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"150","messages":"151","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"152","messages":"153","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"154","messages":"155","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"156","messages":"157","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"158","usedDeprecatedRules":"112"},{"filePath":"159","messages":"160","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"161","messages":"162","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"163","messages":"164","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"165","messages":"166","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"167","messages":"168","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"169","messages":"170","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"171","usedDeprecatedRules":"112"},{"filePath":"172","messages":"173","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"174","messages":"175","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"176","messages":"177","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"178","messages":"179","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"180","messages":"181","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"182","messages":"183","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"184","messages":"185","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"186"},{"filePath":"187","messages":"188","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"189","usedDeprecatedRules":"112"},{"filePath":"190","messages":"191","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"192","messages":"193","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"194","usedDeprecatedRules":"112"},{"filePath":"195","messages":"196","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"197","messages":"198","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"199","messages":"200","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"201","usedDeprecatedRules":"112"},{"filePath":"202","messages":"203","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"204","usedDeprecatedRules":"112"},{"filePath":"205","messages":"206","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"207","usedDeprecatedRules":"112"},{"filePath":"208","messages":"209","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"210","usedDeprecatedRules":"112"},{"filePath":"211","messages":"212","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"213","usedDeprecatedRules":"112"},{"filePath":"214","messages":"215","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"216","usedDeprecatedRules":"112"},{"filePath":"217","messages":"218","errorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"219","usedDeprecatedRules":"112"},{"filePath":"220","messages":"221","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"222","messages":"223","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"224","messages":"225","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"226","usedDeprecatedRules":"112"},{"filePath":"227","messages":"228","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"229","usedDeprecatedRules":"112"},{"filePath":"230","messages":"231","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"232","usedDeprecatedRules":"112"},{"filePath":"233","messages":"234","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"235","messages":"236","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"237","messages":"238","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"239","messages":"240","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},{"filePath":"241","messages":"242","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"112"},"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\index.js",[],["243","244"],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\App.js",["245","246"],"import './App.css';\nimport CartModal from \"./components/nav/CartModal\";\nimport Home from \"./pages/Home\";\nimport Register from \"./pages/Register\";\nimport UserActivate from \"./pages/UserActivate\";\nimport Login from \"./pages/Login\";\nimport ForgetPassword from \"./pages/ForgetPassword\";\nimport ResetPassword from \"./pages/ResetPassword\";\nimport PurchaseHistory from \"./pages/user/PurchaseHistory\";\nimport Profile from \"./pages/user/Profile\";\nimport UpdatePassword from \"./pages/user/UpdatePassword\";\nimport Wishlist from \"./pages/user/Wishlist\";\nimport SubCategory from \"./pages/SubCategory\";\n\nimport Cart from \"./pages/Cart\";\nimport Search from \"./pages/Search\";\n\nimport ProductDetails from \"./pages/ProductDetails\";\n\n//admin\nimport AdminDashboard from \"./pages/admin/AdminDashboard\";\nimport CreateCategory from \"./pages/admin/CreateCategory\";\nimport CreateSubCategory from \"./pages/admin/CreateSubCategory\";\nimport CreateProduct from \"./pages/admin/CreateProduct\";\nimport ViewAllProduct from \"./pages/admin/ViewAllProducts\";\nimport UpdateProduct from \"./pages/admin/UpdateProduct\";\n\nimport Header from \"./components/nav/Header\";\nimport Footer from \"./components/Footer\";\nimport UserRoute from \"./components/privateRoutes/UserRoute\";\nimport AdminRoute from \"./components/privateRoutes/AdminRoute\";\nimport { Switch, Route } from \"react-router-dom\";\n\nimport React, { Fragment, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport axios from \"axios\";\nimport setBearerToken from \"./helper/setBearerToken\";\n// import {connect} from \"react-redux\";\n// import {getState,subscribe} from \"redux\";\n\n//functions \nimport { getUserCartOnLoginFn } from \"./functions/cart\";\nimport getRefreshToken from \"./helper/getRefreshToken\";\nimport { refreshTokenFn } from \"./functions/auth\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n  console.log(\"app.js\");\n  //persist state when refresh was triggered \n  const userCheck = () => {\n    if (window !== \"undefined\") {\n      if (localStorage.getItem(\"token\") && localStorage.getItem(\"rfToken\")) {\n        const authToken = localStorage.getItem(\"token\");\n        const rfAuthToken = localStorage.getItem(\"rfToken\");\n        //set BearerToken\n        setBearerToken(authToken);\n\n        axios.get(`${process.env.REACT_APP_SERVER_API}/user`).then(res => {\n          dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload: res.data\n          });\n          getUserCart(authToken); // retrieve user cart\n        }).catch(err => { //call refresh token\n          axios.post(`${process.env.REACT_APP_SERVER_API}/refreshToken`, { refreshToken: rfAuthToken })\n            .then(res => {\n              dispatch({\n                type: \"LOGGED_IN_USER\",\n                payload: res.data\n              });\n              getUserCart(authToken);// retrieve user cart\n            })\n            .catch(err => {\n              dispatch({\n                type: \"LOGGED_OUT_USER\"\n              });//end dispatch\n            });//end catch\n        });//end catch refresh token\n      }//end token/rftoken exist\n      else {\n        dispatch({\n          type: \"LOGGED_OUT_USER\"\n        });//end dispatch\n      }\n    }//end window undefined\n  }\n\n  const cartCheck = () => {\n    console.log(\"cart function1\");\n    if (window !== \"undefined\") {\n      console.log(\"cart function2\");\n      if (localStorage.getItem(\"cart\")) {\n        console.log(\"cart function3\");\n        const cart = localStorage.getItem(\"cart\");\n        console.log(\"cart function4\");\n        console.log(cart);\n        dispatch({\n          type: \"GET_CART_ONMOUNT\",\n          payload: cart\n        })\n      } //end localStorage \n    }//end window\n  }\n\n  const getUserCart = async (token) => {\n    try {\n      console.log(\"In getUserCart1\");\n      console.log(token);\n      const res = await getUserCartOnLoginFn(token);\n      console.log(\"In getUserCart2\");\n      console.log(res);\n      dispatch({\n        type: \"GET_CART_ONMOUNT\",\n        payload: res.data\n      });\n    } catch (err) {\n      if (err.response.data.error === \"J01\") {\n        const rfAuthToken = getRefreshToken();\n        if (rfAuthToken) {\n          try {\n            const res2 = await refreshTokenFn(rfAuthToken);\n            //update redux state\n            dispatch({\n              type: \"REFRESH_TOKEN\",\n              payload: res2.data\n            });\n            const res3 = await getUserCartOnLoginFn(res2.data.token);\n            //add to redux store for Cart, CartModal and showModalProductReducer\n            dispatch({\n              type: \"GET_CART_ONMOUNT\",\n              payload: res3.data\n            });\n          } catch (err) {\n\n          }\n        }\n      } else {\n\n      }\n    }\n  }\n\n  useEffect(() => {\n    console.log(\"user useeffect\")\n    userCheck();\n  }, [dispatch]);\n  /*\n    useEffect(()=> {\n      console.log(\"cart useeffect\");\n      cartCheck();\n    }, []);\n  */\n  return (\n    <>\n      <div className=\"container\">\n        <Header />\n        <CartModal />\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route exact path=\"/register\" component={Register} />\n          <Route exact path=\"/user/activate/:token\" component={UserActivate} />\n          <Route exact path=\"/user/forgetPassword\" component={ForgetPassword} />\n          <Route exact path=\"/user/password/reset/:token\" component={ResetPassword} />\n          <Route exact path=\"/login\" component={Login} />\n          <Route exact path=\"/cart\" component={Cart} />\n          <Route exact path=\"/search\" component={Search} />\n          <Route exact path=\"/subcategory/:slug\" component={SubCategory} />\n          <Route exact path=\"/productDetails/:slug\" component={ProductDetails} />\n          <UserRoute exact path=\"/user/purchaseHistory\" component={PurchaseHistory} />\n          <UserRoute exact path=\"/user/profile\" component={Profile} />\n          <UserRoute exact path=\"/user/updatePassword\" component={UpdatePassword} />\n          <UserRoute exact path=\"/user/wishlist\" component={Wishlist} />\n          <AdminRoute exact path=\"/admin/dashboard\" component={AdminDashboard} />\n          <AdminRoute exact path=\"/admin/createCategory\" component={CreateCategory} />\n          <AdminRoute exact path=\"/admin/createSubCategory\" component={CreateSubCategory} />\n          <AdminRoute exact path=\"/admin/CreateProduct\" component={CreateProduct} />\n          <AdminRoute exact path=\"/admin/ViewAllProducts\" component={ViewAllProduct} />\n          <AdminRoute exact path=\"/admin/updateProduct/:slug\" component={UpdateProduct} />\n        </Switch>\n        <Footer />\n      </div>\n    </>\n  );\n}\n\n// // export default App;\n// const mapStateToProps = state => {\n//   console.log(\"MAP STATE TO PROPS\",state);\n//   return {user:state.user}\n// }\n\n\n// export default connect(mapStateToProps,{})(App);\nexport default App;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reportWebVitals.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\Home.js",["247","248","249","250","251","252","253"],"import React, { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getProductsBySearchFilterFn } from \"../functions/product\";\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport LoadingCard from \"../components/LoadingCard\";\r\nimport Typewriter from \"typewriter-effect\";\r\nimport { MDBCard } from 'mdbreact';\r\nimport LatestCookies from \"../components/LatestCookies\";\r\nimport BestSellers from \"../components/BestSellers\";\r\nconst Home = () => {\r\n\r\n    const typeWriter = () => {\r\n        return <Typewriter\r\n            options={{\r\n                strings: \"The Best Protein Cookie\",\r\n                autoStart: true,\r\n                loop: true\r\n            }}\r\n        />\r\n    }\r\n    return (\r\n        <>\r\n            <div className=\"text-danger h1 font-weight-bold text-center pt-3\">{typeWriter()}</div>\r\n            <LatestCookies/>\r\n            <BestSellers/>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default Home;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\nav\\Header.js",["254","255","256"],"import React, { useState, useEffect } from \"react\";\r\nimport Logo from \"../../Images/Logo.png\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { logoutFn } from \"../../functions/auth\";\r\nimport { listSubCategoriesByCategoryFn } from \"../../functions/subCategory\";\r\nimport { getCategoriesFn } from \"../../functions/category\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { ToastContainer } from 'react-toastify';\r\nimport { Badge, Menu, Modal, Button } from 'antd';\r\nimport { UserOutlined, UserAddOutlined, ShoppingOutlined, ShoppingCartOutlined } from '@ant-design/icons';\r\nimport SearchQuery from \"../SearchQuery\";\r\n\r\nconst { SubMenu } = Menu;\r\n\r\n// import {connect} from \"react-redux\";\r\n// import { useHistory } from \"react-router-dom\";\r\n\r\n\r\nconst Header = () => {\r\n\r\n    const history = useHistory();\r\n    const { user, cart } = useSelector(state => {\r\n        return ({ ...state })\r\n    });\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [currentSelected, setCurrentSelected] = useState();\r\n\r\n    const [shopItem, setShopItem] = useState([]);\r\n\r\n    \r\n\r\n    \r\n\r\n    const getShopItem = async () => {\r\n        const res = await getCategoriesFn();\r\n        let categoriesObj = {};\r\n        let categoriesArray = [];\r\n        let categories = res.data;\r\n        for (let i = 0; i < categories.length; i++) {\r\n            const res2 = await listSubCategoriesByCategoryFn(categories[i]._id);\r\n            let subcategories = res2.data;\r\n            categoriesObj = { ...categories[i] };\r\n            categoriesObj.subcategories = subcategories;\r\n            categoriesArray.push(categoriesObj);\r\n            categoriesObj = {};\r\n        }\r\n        setShopItem(categoriesArray);\r\n\r\n    }\r\n    useEffect(() => {\r\n        getShopItem();\r\n    }, [])\r\n\r\n    const handleLogout = async () => {\r\n        const rfToken = localStorage.getItem(\"rfToken\");\r\n        console.log(rfToken);\r\n        try {\r\n            console.log(\"1\")\r\n            await logoutFn(rfToken);\r\n            console.log(\"2\")\r\n            dispatch({\r\n                type: \"LOGGED_OUT_USER\"\r\n            });\r\n            console.log(\"3\")\r\n            history.push(\"/login\");\r\n        } catch (err) {\r\n            //if somehow logout have error still proceed to remove from local storage\r\n            console.log(\"4\")\r\n            localStorage.removeItem(\"token\");\r\n            localStorage.removeItem(\"rfToken\");\r\n            history.push(\"/login\");\r\n        }\r\n    }\r\n    const antMenu = () => {\r\n        return (\r\n            <Menu selectedKeys={[currentSelected]} mode=\"horizontal\" className=\"stickyHeader\" style={{ backgroundColor: \"#f3fabb\" }}>\r\n                <Menu.Item className=\"removeUnderlineHover\" key=\"logo\">\r\n                    <Link to=\"/\">\r\n                        <img\r\n                            src={Logo}\r\n                            alt=\"MumsCookyLogo\"\r\n                            style={{ height: \"60px\", objectFit: \"cover\" }}\r\n                        />\r\n                    </Link>\r\n                </Menu.Item>\r\n                <SubMenu key=\"shop\" className=\"removeUnderlineHover\" icon={<ShoppingOutlined />} title=\"Shop\">\r\n                    {shopItem.map(si => {\r\n                        return (<Menu.ItemGroup title={si.name} key={si._id}>\r\n                            {si.subcategories.map(subsi => {\r\n                                return (<Menu.Item key={subsi._id} ><Link to={`/subcategory/${subsi.slug}`}>{subsi.name}</Link></Menu.Item>)\r\n                            })}\r\n                        </Menu.ItemGroup>)\r\n                    })}\r\n                </SubMenu>\r\n\r\n                {user && user.token && (\r\n                    <SubMenu className=\"float-right mt-3 removeUnderlineHover\" key=\"username\" icon={<UserOutlined />} title={user.name || user.email} >\r\n                        {user && user.role === \"admin\" && (\r\n                            <Menu.Item key=\"AdminDashboard\"><Link style={{ textDecoration: 'none', active: \"pink\" }} to=\"/admin/dashboard\">Admin Dashboard\r\n                        </Link></Menu.Item>\r\n                        )}\r\n\r\n                        <Menu.Item key=\"MyAccount\"><Link style={{ textDecoration: 'none', active: \"pink\" }} to=\"/user/profile\">My Account\r\n                        </Link></Menu.Item>\r\n\r\n                        <Menu.Item key=\"MyPurchase\"><Link style={{ textDecoration: 'none', active: \"pink\" }} to=\"/user/purchaseHistory\">My Purchase\r\n                        </Link></Menu.Item>\r\n\r\n                        <Menu.Item key=\"MyWishlist\"><Link style={{ textDecoration: 'none', active: \"pink\" }} to=\"/user/wishlist\">My Wishlist\r\n                        </Link></Menu.Item>\r\n\r\n                        <Menu.Item key=\"Logout\" onClick={handleLogout}>Logout</Menu.Item>\r\n                    </SubMenu>\r\n                )}\r\n\r\n                {user.token === null && (\r\n                    <>\r\n                        <Menu.Item className=\"float-right mt-3 removeUnderlineHover\" key=\"register\" icon={<UserAddOutlined />}>\r\n                            <Link to=\"/register\" style={{ textDecoration: 'none', active: \"pink\" }}>Register</Link>\r\n                        </Menu.Item>\r\n                        <Menu.Item className=\"float-right mt-3 removeUnderlineHover\" key=\"login\" icon={<UserOutlined />}>\r\n                            <Link to=\"/login\" style={{ textDecoration: 'none', active: \"pink\" }}>Login</Link>\r\n                        </Menu.Item>\r\n                    </>\r\n                )}\r\n\r\n                <Menu.Item\r\n                    className=\"float-right mt-3 removeUnderlineHover\"\r\n                    key=\"cart\"\r\n                // icon={<ShoppingCartOutlined />}\r\n                >\r\n                    <Link to=\"/cart\">\r\n                        <Badge count={cart.length} >\r\n                            <ShoppingCartOutlined />\r\n                        </Badge>\r\n                    </Link>\r\n                </Menu.Item>\r\n\r\n                <Menu.Item className=\"float-right mt-3 removeUnderlineHover\">\r\n                    <SearchQuery />\r\n                </Menu.Item>\r\n            </Menu>\r\n\r\n        );\r\n\r\n\r\n    }\r\n\r\n    //Return Layout \r\n    return (\r\n        <>\r\n            <ToastContainer\r\n                position=\"top-center\"\r\n                autoClose={5000}\r\n                hideProgressBar={false}\r\n                newestOnTop={false}\r\n                closeOnClick\r\n                rtl={false}\r\n                pauseOnFocusLoss\r\n                draggable\r\n                pauseOnHover\r\n            />\r\n            {antMenu()}\r\n        </>\r\n    )\r\n};\r\n\r\n\r\n// const mapStateToProps = state => {\r\n//     console.log(\"MAP STATE TO PROPS\",state);\r\n//     return {user:state.user}\r\n// }\r\n\r\n\r\n// export default connect(mapStateToProps,{})(Header);\r\nexport default Header;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\Login.js",["257"],"import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loginFn, googleLoginFn, facebookLoginFn } from \"../functions/auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { GoogleLogin } from \"react-google-login\";\r\nimport { addCartBeforeLoginFn, getUserCartOnLoginFn } from \"../functions/cart\";\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\r\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody, MDBAlert, MDBIcon } from 'mdbreact';\r\nconst regexForEmail = /^[a-zA-Z0-9_]+@(?:[a-zA-Z0-9]+\\.)+[A-Za-z]+$/;\r\nconst passwordRegex = new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,64})\");\r\n\r\nconst Login = ({ history }) => {\r\n\r\n    const { user, cart } = useSelector((state) => {\r\n        return { ...state };\r\n    });\r\n    console.log(\"asd1\");\r\n    console.log(history.location.state)\r\n    //redirect base on role\r\n    const roleBasedRedirect = user => {\r\n\r\n        if (history.location.state && history.location.state.redirectedFrom) {\r\n            history.push(history.location.state.redirectedFrom);\r\n        } else {\r\n            console.log(\"here2\");\r\n            if (user.role === \"admin\") {\r\n                history.push(\"/admin/dashboard\");\r\n            }\r\n            else if (user.role === \"normal\") {\r\n                history.push(\"/\");\r\n            }\r\n        }\r\n    }\r\n    const addCartBeforeLogin = async (token) => {\r\n        if (cart && cart.length > 0) { //cart is not empty\r\n            try {\r\n                const res = await addCartBeforeLoginFn(cart, token);\r\n                dispatch({\r\n                    type: \"UPDATE_CART_ONLOGIN\",\r\n                    payload: res.data\r\n                })\r\n            } catch (err) {\r\n                //this function run async No need catch, token is pass on login will unlikely it will have expire condition\r\n            }\r\n\r\n        } else { //cart is empty no need execute\r\n            return getUserCartOnLogin(token);\r\n        }\r\n    }\r\n\r\n    const getUserCartOnLogin = async (token) => {\r\n        try {\r\n            const res = await getUserCartOnLoginFn(token);\r\n            dispatch({\r\n                type: \"GET_CART_ONLOGIN\",\r\n                payload: res.data\r\n            })\r\n        } catch (err) {\r\n            //this function run async No need catch, token is pass on login will unlikely it will have expire condition\r\n        }\r\n\r\n    }\r\n\r\n\r\n    //Redirect if user logged in\r\n    useEffect(() => {\r\n        //this will stop useEffect for running twice.\r\n        if (history.location.state) {\r\n            return;\r\n        } else {\r\n            if (user && user.email && user.token) {\r\n                //redirect\r\n                roleBasedRedirect(user);\r\n\r\n            }\r\n        }\r\n        // return () => {\r\n\r\n        // }\r\n    }, [user]);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [validEmail, setValidEmail] = useState(false);\r\n    const [validPassword, setValidPassword] = useState(false);\r\n    const [loginError, setLoginError] = useState(\"\");\r\n\r\n    const [formData, setFormData] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n    });\r\n\r\n    const { email, password } = formData;\r\n\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        try {\r\n            const res = await loginFn(email, password);\r\n            //clear form data \r\n            setFormData({\r\n                email: \"\",\r\n                password: \"\",\r\n            });\r\n            //dispatch\r\n            dispatch({\r\n                type: \"LOGGED_IN_USER\",\r\n                payload: res.data\r\n            });\r\n            addCartBeforeLogin(res.data.token);\r\n            //redirect\r\n            roleBasedRedirect(res.data)\r\n        }\r\n        catch (err) {\r\n            //clear password\r\n            setFormData({\r\n                ...formData,\r\n                password: \"\",\r\n            });\r\n\r\n            setLoginError(err.response.data.error);\r\n        }\r\n    }\r\n\r\n    const handleChange = text => e => {\r\n        setFormData({ ...formData, [text]: e.target.value });\r\n\r\n        if (text === \"email\") {\r\n            setValidEmail(regexForEmail.test(e.target.value));\r\n        } else if (text === \"password\") {\r\n            setValidPassword(passwordRegex.test(e.target.value))\r\n        }\r\n    }\r\n\r\n    const responseGoogle = async response => {\r\n        try {\r\n            const res = await googleLoginFn(response.tokenId);\r\n\r\n            //dispatch\r\n            dispatch({\r\n                type: \"LOGGED_IN_USER\",\r\n                payload: res.data\r\n            });\r\n            console.log(res.data);\r\n            addCartBeforeLogin(res.data.token);\r\n            //redirect\r\n            roleBasedRedirect(res.data)\r\n        }\r\n        catch (err) {\r\n            setLoginError(err.response.data.error);\r\n        }\r\n    }\r\n\r\n    const responseFacebook = async response => {\r\n        try {\r\n            const res = await facebookLoginFn(response.userID, response.accessToken);\r\n            //dispatch\r\n            dispatch({\r\n                type: \"LOGGED_IN_USER\",\r\n                payload: res.data\r\n            });\r\n            addCartBeforeLogin(res.data.token);\r\n            //redirect\r\n            roleBasedRedirect(res.data);\r\n        } catch (err) {\r\n            setLoginError(err.response.data.error);\r\n        }\r\n    }\r\n\r\n    const mdBootStrapLogin = () => {\r\n        return (\r\n            <MDBContainer className=\"p-5\">\r\n                <MDBRow>\r\n                    <MDBCol md=\"6\" className=\"offset-md-3\">\r\n                        <MDBCard>\r\n                            <MDBCardBody>\r\n                                <form onSubmit={handleSubmit}>\r\n                                    <p className=\"h4 text-center py-4\">Sign In</p>\r\n                                    <div className=\"grey-text\">\r\n                                        <MDBInput\r\n                                            label=\"Your Email\"\r\n                                            icon=\"envelope\"\r\n                                            group\r\n                                            type=\"email\"\r\n                                            value={email}\r\n                                            onChange={handleChange(\"email\")}\r\n                                            autoFocus\r\n                                        />\r\n                                        <MDBInput\r\n                                            label=\"Your Password\"\r\n                                            icon=\"lock\"\r\n                                            group\r\n                                            type=\"password\"\r\n                                            value={password}\r\n                                            onChange={handleChange(\"password\")}\r\n                                        />\r\n                                    </div>\r\n                                    {email && !validEmail && (<MDBAlert color=\"danger\">Invalid Email Address</MDBAlert>)}\r\n                                    {password && !validPassword && (<MDBAlert color=\"danger\">Password must be 8 to 64 characters, contain 1 upper, 1 lower, 1 numberic and a special character</MDBAlert>)}\r\n                                    {(loginError !== \"\" && password === \"\") && (<MDBAlert color=\"danger\">{loginError}</MDBAlert>)}\r\n                                    <div className=\"text-center py-2\">\r\n                                        <MDBBtn disabled={!(validEmail && validPassword)} gradient=\"tempting-azure\" rounded block type=\"submit\">\r\n                                            Sign In\r\n                                        </MDBBtn>\r\n\r\n                                    </div>\r\n                                </form>\r\n                                <div className=\"row\">\r\n                                    <div className=\"col\">\r\n                                        <Link to=\"/user/forgetPassword\" className=\"float-right m-3\">Forget Password?</Link>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"row mb-3\">\r\n                                    <div className=\"col\">\r\n                                        <GoogleLogin\r\n                                            clientId={process.env.REACT_APP_GOOGLE_CLIENT_ID}\r\n                                            buttonText=\"Login With Google\"\r\n                                            onSuccess={responseGoogle}\r\n                                            onFailure={responseGoogle}\r\n                                            cookiePolicy={\"single_host_origin\"}\r\n                                            render={renderProps => (\r\n                                                <MDBBtn rounded outline color=\"success\" onClick={renderProps.onClick} disabled={renderProps.disabled}><MDBIcon fab icon=\"google\" />Login With Google</MDBBtn>\r\n\r\n                                            )}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"col\">\r\n                                        <FacebookLogin\r\n                                            appId={process.env.REACT_APP_FACEBOOK_APP_ID}\r\n                                            autoLoad={false}\r\n                                            callback={responseFacebook}\r\n                                            icon={<MDBIcon fab icon=\"facebook-f\" />}\r\n                                            render={renderProps => (\r\n                                                <MDBBtn rounded outline color=\"info\" onClick={renderProps.onClick}><MDBIcon fab icon=\"facebook-f\" />Login With Facebook</MDBBtn>\r\n                                            )}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </MDBCardBody>\r\n                        </MDBCard>\r\n                    </MDBCol>\r\n                </MDBRow>\r\n            </MDBContainer>)\r\n    }\r\n    return (\r\n        <>\r\n            {mdBootStrapLogin()}\r\n        </>\r\n\r\n    )\r\n};\r\n\r\nexport default Login;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\Register.js",["258","259"],"import React, { useState, useEffect } from \"react\";\r\nimport { registerFn } from \"../functions/auth\";\r\nimport { useSelector } from \"react-redux\";\r\n// import {connect} from \"react-redux\";\r\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody, MDBAlert } from 'mdbreact';\r\nconst regexForEmail = /^[a-zA-Z0-9_]+@(?:[a-zA-Z0-9]+\\.)+[A-Za-z]+$/;\r\nconst Register = ({ history }) => {\r\n\r\n    const user = useSelector((state) => {\r\n        return state.user;\r\n    });\r\n\r\n    //redirect base on role\r\n    const roleBasedRedirect = user => {\r\n        console.log(\"roleBasedRedirect\", user);\r\n        if (user.role === \"admin\") {\r\n            history.push(\"/admin/dashboard\");\r\n        }\r\n        else if (user.role === \"normal\") {\r\n            history.push(\"/\");\r\n        }\r\n    }\r\n    //Redirect if user logged in\r\n    useEffect(() => {\r\n        console.log(\"here1\", user.email);\r\n        if (user && user.email && user.token) {\r\n            //redirect to home\r\n            console.log(\"here2\");\r\n            roleBasedRedirect(user);\r\n        }\r\n    }, [user]);\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n\r\n    const [validEmail, setValidEmail] = useState(false);\r\n\r\n\r\n    const registerFormEmail = () => {\r\n        return (\r\n\r\n            <MDBContainer className=\"p-5\">\r\n                <MDBRow>\r\n                    <MDBCol md=\"6\" className=\"offset-md-3\">\r\n                        <MDBCard>\r\n                            <MDBCardBody>\r\n                                <form onSubmit={handleEmailSubmit}>\r\n                                    <p className=\"h4 text-center py-4\">Sign Up</p>\r\n                                    <MDBInput\r\n                                        label=\"Your Email\"\r\n                                        icon=\"envelope\"\r\n                                        group\r\n                                        type=\"email\"\r\n                                        value={email}\r\n                                        onChange={handleEmailChange}\r\n                                        autoFocus\r\n                                    />\r\n                                    {\r\n                                        email\r\n                                        && !validEmail\r\n                                        && (<MDBAlert color=\"danger\">Invalid Email Address</MDBAlert>)\r\n                                    }\r\n                                    <MDBBtn\r\n                                        type=\"submit\"\r\n                                        gradient=\"tempting-azure\" rounded block\r\n                                        disabled={!validEmail}>\r\n                                        Sign Up with Email\r\n                                    </MDBBtn>\r\n                                </form>\r\n                            </MDBCardBody>\r\n                        </MDBCard>\r\n                    </MDBCol>\r\n                </MDBRow>\r\n            </MDBContainer>\r\n        )\r\n    }\r\n    const handleEmailChange = e => {\r\n        setEmail(e.target.value);\r\n        setValidEmail(regexForEmail.test(e.target.value));\r\n    }\r\n\r\n    const handleEmailSubmit = async e => {\r\n        e.preventDefault();\r\n        try {\r\n            const res = await registerFn(email);\r\n            console.log(res);\r\n            setEmail(\"\");\r\n            window.alert(res.data.message);\r\n        } catch (err) {\r\n            window.alert(err.response.data.error);\r\n            if (err.response.status === 400) {\r\n                history.push(\"/user/forgetPassword\");\r\n            }\r\n        }\r\n    }\r\n\r\n    const registerFormPhone = () => {\r\n\r\n    }\r\n    //Return Layout\r\n    return (\r\n        registerFormEmail()\r\n    )\r\n};\r\n\r\n\r\n// const mapStateToProps = state => {\r\n//     console.log(\"MAP STATE TO PROPS\",state);\r\n//     return {userExist:state.user}\r\n// }\r\n// export default connect(mapStateToProps,{})(Register);\r\n\r\nexport default Register;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\Cart.js",["260","261","262","263","264","265"],"import React, { createContext, useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { deleteSingleCartItemFn, updateCartQuantityFn } from \"../functions/cart\";\r\nimport { Image } from \"antd\";\r\nimport getRefreshToken from \"../helper/getRefreshToken\";\r\nimport { refreshTokenFn } from \"../functions/auth\";\r\nimport { getProductQuantityFn } from \"../functions/product\";\r\n\r\nconst Cart = () => {\r\n    const { cart, user } = useSelector(state => {\r\n        return { ...state }\r\n    });\r\n\r\n    const dispatch = useDispatch();\r\n    //state\r\n    const [promoCode, setPromoCode] = useState(\"\");\r\n    const [itemsTotal, setItemsTotal] = useState(0);\r\n    const [discount, setDiscount] = useState(0);\r\n    const [totalPayable, setTotalPayable] = useState(0);\r\n    const getDBProductQuantity =  () => {\r\n        console.log(\"DB cart here\");\r\n        let isUpdated = false;\r\n        let checkQuantityCart = cart.map(product => {\r\n            if (product.quantity > product.availableQuantity) {\r\n                isUpdated = true;\r\n                product.quantity = product.availableQuantity\r\n            }\r\n            return product;\r\n        });\r\n        if (isUpdated) {\r\n            dispatch({\r\n                type: \"UPDATE_CART\",\r\n                payload: checkQuantityCart\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        \r\n        if(!user||!user.email||!user.token) {\r\n            console.log(\"aabb\");\r\n            getDBProductQuantity();\r\n        }        \r\n    },[]);\r\n\r\n    useEffect(() => {\r\n        //reduce takes in a function as first parameter, 2nd parameter is the starting value,\r\n        //on the first loop current value is 0 thus we use the nextValue price * quantity which is the first array of the cart\r\n        const totalPrice = cart.reduce((currentValue, nextValue) => {\r\n            return currentValue + (nextValue.price * nextValue.quantity);\r\n        }, 0);\r\n        setItemsTotal(totalPrice);\r\n        setTotalPayable(totalPrice);\r\n    }, [cart]);\r\n\r\n    const displayCartItemHeader = () => {\r\n        return (\r\n            <>\r\n                <div className=\"row mb-3\">\r\n                    <div className=\"col-md-6 font-weight-bold\">\r\n                        Products\r\n                </div>\r\n                    <div className=\"col-md-2 font-weight-bold\">\r\n                        Price\r\n                </div>\r\n                    <div className=\"col-md-2 font-weight-bold\">\r\n                        Quantity\r\n                </div>\r\n                    <div className=\"col-md-2 font-weight-bold\">\r\n                        Total Price:\r\n                </div>\r\n                </div>\r\n                <hr />\r\n            </>\r\n        )\r\n    }\r\n\r\n    const displayCartItemContent = () => {\r\n        return (cart.map((c) => {\r\n            return (\r\n                <div key={c._id}>\r\n                    <div className=\"row\" >\r\n                        <div className=\"col-md-6\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-md-4\">\r\n                                    <Link\r\n                                        to={`productDetails/${c.slug}`}>\r\n                                        <Image\r\n                                            src={`${process.env.REACT_APP_AWSS3DIR}/${c.images[0]}`}\r\n                                            preview={false}\r\n                                            width={100}\r\n                                        />\r\n                                    </Link>\r\n                                </div>\r\n                                <div className=\"col-md-8\">\r\n                                    <div className=\"font-weight-bold\">{c.name}</div>\r\n                                    <div>{c.description}</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-2\">\r\n                            SGD${c.price}\r\n                        </div>\r\n                        <div className=\"col-md-2\">\r\n                            <input\r\n                                className=\"form-control-sm mr-sm-2 w-75\"\r\n                                type=\"number\"\r\n                                value={c.quantity}\r\n                                onChange={(event) => handleQuantityChange(event, c)}\r\n                            />\r\n                            <br />\r\n                            <div className=\"font-weight-light font-italic\">{c.availableQuantity} Remaining</div>\r\n                        </div>\r\n                        <div className=\"col-md-2\">\r\n                            SGD${c.price * c.quantity}\r\n                            <br />\r\n                            <a onClick={() => handleSingleRemoveItem(c)} className=\"text-danger\">Remove</a>\r\n                        </div>\r\n                    </div>\r\n                    <hr />\r\n                </div>\r\n            )\r\n        }));\r\n    }\r\n\r\n    const handlePromoCode = () => {\r\n\r\n    }\r\n\r\n    const handleQuantityChange = async (event, singleCartItem) => {\r\n        //make quantity at least 1\r\n        let quantity = parseInt(event.target.value) < 1 ? 1 : parseInt(event.target.value);\r\n        //check max quanity\r\n        quantity = quantity >= singleCartItem.availableQuantity ? singleCartItem.availableQuantity : quantity;\r\n        //if user logged in update cart is to update db\r\n        if (user && user.email && user.token) {\r\n            const productObj = {};\r\n            productObj.productID = singleCartItem._id;\r\n            productObj.updateQuantity = quantity;\r\n            try {\r\n                const res = await updateCartQuantityFn(productObj, user.token);\r\n                //update redux \r\n                dispatch({\r\n                    type: \"UPDATE_CART\",\r\n                    payload: res.data\r\n                });\r\n            } catch (err) {\r\n                if (err.response.data.error === \"J01\") {\r\n                    const rfAuthToken = getRefreshToken();\r\n                    if (rfAuthToken) {\r\n                        try {\r\n                            const res2 = await refreshTokenFn(rfAuthToken);\r\n                            //update redux state\r\n                            dispatch({\r\n                                type: \"REFRESH_TOKEN\",\r\n                                payload: res2.data\r\n                            });\r\n                            const res3 = await updateCartQuantityFn(singleCartItem._id, res2.data.token);\r\n                            dispatch({\r\n                                type: \"UPDATE_CART\",\r\n                                payload: res3.data\r\n                            });\r\n                        } catch (err) {\r\n                            // setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                        }\r\n                    }\r\n                } else { //fail not because of auth token\r\n                    // setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                }\r\n            }\r\n\r\n\r\n        } else {\r\n            //set localstorage and redux state\r\n            if (typeof window !== \"undefined\") {\r\n                if (localStorage.getItem(\"cart\")) {\r\n                    let localStorageCart = JSON.parse(localStorage.getItem(\"cart\"));\r\n                    localStorageCart.map(lsc => {\r\n                        if (lsc._id === singleCartItem._id) {\r\n                            lsc.quantity = quantity;\r\n                        }\r\n                        return lsc;\r\n                    });\r\n                    localStorage.setItem(\"cart\", JSON.stringify(localStorageCart));\r\n                    //update redux \r\n                    dispatch({\r\n                        type: \"UPDATE_CART\",\r\n                        payload: localStorageCart\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const displayOrderSummary = () => {\r\n        return (\r\n            <div className=\"border p-3\">\r\n                <div className=\"row\">\r\n                    <h4 className=\"col\">Order Summary</h4>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col\">Promo Code</div>\r\n                </div>\r\n                <div className=\"row mt-1\">\r\n                    <div className=\"col-md-8\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={promoCode}\r\n                            className=\"form-control mt-1\"\r\n                            onChange={handlePromoCode}\r\n                            placeholder=\"Promo Code here\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"col-md-4\">\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"btn btn-sm btn-outline-dark\">\r\n                            Apply\r\n                    </button>\r\n                    </div>\r\n                </div>\r\n                <hr />\r\n                <div className=\"row mb-1 mr-1\">\r\n                    <div className=\"col\">Items Total : </div>\r\n                    <div className=\"ml-auto\">SGD${itemsTotal}</div>\r\n                </div>\r\n                <div className=\"row mr-1 \">\r\n                    <div className=\"col\">Discounts:</div>\r\n                    <div className=\"ml-auto\"><div className=\"text-danger\">-SGD${discount}</div></div>\r\n                </div>\r\n                <hr />\r\n                <div className=\"row mb-1 mr-1\">\r\n                    <div className=\"col\">Total Payable</div>\r\n                    <div className=\"ml-auto \">SGD${totalPayable}</div>\r\n                </div>\r\n                <div className=\"row mt-3\">\r\n                    <div className=\"col\">\r\n                        {user && user.email && user.token ?\r\n                            (<Link\r\n                                type=\"button\"\r\n                                className=\"btn btn-warning w-100 mr-auto ml-auto text-light\"\r\n                                to={{\r\n                                    pathname: \"/Checkout\"\r\n                                }}\r\n                                disabled={cart.length === 0}>Proceed To Checkout\r\n                            </Link>) : (<Link\r\n                                type=\"button\"\r\n                                className=\"btn btn-warning w-100 mr-auto ml-auto text-light\"\r\n                                to={{\r\n                                    pathname: \"/login\",\r\n                                    state: {\r\n                                        redirectedFrom: \"cart\"\r\n                                    }\r\n                                }}\r\n                                disabled={cart.length === 0}>Proceed To Checkout\r\n                            </Link>)\r\n                        }\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const displayNoItemInCart = () => {\r\n        return (\r\n            <h1 className=\"mr-auto ml-auto\">Cart is empty</h1>\r\n        )\r\n    }\r\n\r\n    const handleSingleRemoveItem = async c => {\r\n        if (typeof window !== \"undefined\") {\r\n            if (user && user.email && user.token) { //user logged in, delete document from db\r\n                try {\r\n                    const res = await deleteSingleCartItemFn(c._id, user.token);\r\n                    //update redux\r\n                    dispatch({\r\n                        type: \"DELETE_SINGLE_CART_ITEM\",\r\n                        payload: res.data\r\n                    });\r\n                } catch (err) {\r\n                    if (err.response.data.error === \"J01\") {\r\n                        const rfAuthToken = getRefreshToken();\r\n                        if (rfAuthToken) {\r\n                            try {\r\n                                const res2 = await refreshTokenFn(rfAuthToken);\r\n                                //update redux state\r\n                                dispatch({\r\n                                    type: \"REFRESH_TOKEN\",\r\n                                    payload: res2.data\r\n                                });\r\n                                const res3 = await deleteSingleCartItemFn(c._id, res2.data.token);\r\n                                dispatch({\r\n                                    type: \"DELETE_SINGLE_CART_ITEM\",\r\n                                    payload: res3.data\r\n                                });\r\n                            } catch (err) {\r\n                                // setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                            }\r\n                        }\r\n                    } else { //fail not because of auth token\r\n                        // setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                    }\r\n                }\r\n            } else { //user not logged in, update localstorage\r\n                const filteredCart = cart.filter(cartItem => {\r\n                    return cartItem._id !== c._id\r\n                });\r\n                localStorage.setItem(\"cart\", JSON.stringify(filteredCart));\r\n                //update redux \r\n                dispatch({\r\n                    type: \"UPDATE_CART\",\r\n                    payload: filteredCart\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            {/* {JSON.stringify(cart)} */}\r\n            <div className=\"row mt-4\">\r\n                {cart.length > 0 ? (<>\r\n                    <div className=\"col-md-8\">\r\n                        {displayCartItemHeader()}\r\n                        {displayCartItemContent()}\r\n                    </div>\r\n                    <div className=\"col-md-4\">\r\n                        {displayOrderSummary()}\r\n\r\n                    </div>\r\n                </>)\r\n                    :\r\n                    (<div className=\"ml-auto mr-auto\">{displayNoItemInCart()}</div>)}\r\n            </div>\r\n\r\n\r\n\r\n        </>\r\n    )\r\n};\r\n\r\nexport default Cart;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\auth.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\UserActivate.js",["266","267"],"import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { activateAccountFn, activateAccountWithPasswordFn } from \"../functions/auth\";\r\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody, MDBAlert } from 'mdbreact';\r\n\r\nlet validationSet = new Set();\r\nlet validationArr = [];\r\nconst passwordRegex = new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,64})\");\r\n\r\nconst UserActivate = ({ match, history }) => {\r\n\r\n    const user = useSelector((state) => {\r\n        return state.user;\r\n    });\r\n\r\n    //redirect base on role\r\n    const roleBasedRedirect = user => {\r\n        if (user.role === \"admin\") {\r\n            history.push(\"/admin/dashboard\");\r\n        }\r\n        else if (user.role === \"normal\") {\r\n            history.push(\"/\");\r\n        }\r\n    }\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [validations, setValidations] = useState([]);\r\n    const [formData, setFormData] = useState({\r\n        name: \"\",\r\n        password1: \"\",\r\n        password2: \"\"\r\n    });\r\n    const { name, password1, password2 } = formData;\r\n\r\n    //Redirect if user logged in\r\n    useEffect(() => {\r\n        console.log(\"here1\", user.email);\r\n        if (user && user.email && user.token) {\r\n            //redirect to home\r\n            roleBasedRedirect(user);\r\n        }\r\n    }, [user]);\r\n    const activateAccount = async (token) => {\r\n        try {\r\n            const res = await activateAccountFn(token);\r\n            if (res.status !== 204) {\r\n                window.alert(\"Registration Error please try again\");\r\n                history.push(\"/register\");\r\n            }\r\n        }\r\n        catch (err) {\r\n            window.alert(err.response.data.error);\r\n            history.push(\"/register\");\r\n        }\r\n    }\r\n    //if user fail to activate token within 15mins\r\n    useEffect(() => {\r\n        const token = match.params.token;\r\n        activateAccount(token);\r\n    }, []);\r\n\r\n    const handleChange = text => e => {\r\n        setFormData({ ...formData, [text]: e.target.value });\r\n\r\n        if (text === \"name\") {\r\n            if (e.target.value.length < 2 || e.target.value.length > 64) {\r\n                validationSet.add(\"Name must be between 2 to 64 characters\");\r\n            } else {\r\n                validationSet.delete(\"Name must be between 2 to 64 characters\");\r\n            }\r\n        }\r\n\r\n        if (text === \"password1\") {\r\n            if (!passwordRegex.test(e.target.value)) {\r\n                validationSet.add(\"Password must be 8 to 64 characters, contain 1 upper, 1 lower, 1 numberic and a special character\");\r\n\r\n            } else {\r\n                validationSet.delete(\"Password must be 8 to 64 characters, contain 1 upper, 1 lower, 1 numberic and a special character\");\r\n            }\r\n            if (e.target.value !== password2) {\r\n                validationSet.add(\"Password and confirm Password don't match\");\r\n            } else {\r\n                validationSet.delete(\"Password and confirm Password don't match\");\r\n            }\r\n        }\r\n\r\n        if (text === \"password2\") {\r\n            if (e.target.value !== password1) {\r\n                validationSet.add(\"Password and confirm Password don't match\");\r\n            } else {\r\n                validationSet.delete(\"Password and confirm Password don't match\");\r\n            }\r\n        }\r\n\r\n        validationArr = [...validationSet];\r\n        setValidations(validationArr);\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        if (password1 === password2) {\r\n            try {\r\n                const res = await activateAccountWithPasswordFn(match.params.token, name, password1);\r\n                //clear form data\r\n                setFormData({\r\n                    name: \"\",\r\n                    password1: \"\",\r\n                    password2: \"\"\r\n                });\r\n                //update redux\r\n                dispatch({\r\n                    type: \"LOGGED_IN_USER\",\r\n                    payload: res.data\r\n                });\r\n\r\n                //redirect\r\n                roleBasedRedirect(res.data);\r\n\r\n            } catch (err) {\r\n                window.alert(err.response.data.error);\r\n                history.push(\"/register\");\r\n            }\r\n        }\r\n        else {\r\n            window.alert(\"Registration Error please try again\");\r\n            setFormData({\r\n                ...formData,\r\n                password1: \"\",\r\n                password2: \"\"\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n    \r\n    const registerWithPassword = () => {\r\n        return (\r\n            <MDBContainer className=\"p-5\">\r\n                <MDBRow>\r\n                    <MDBCol md=\"6\" className=\"offset-md-3\">\r\n                        <MDBCard>\r\n                            <MDBCardBody>\r\n                                <form onSubmit={handleSubmit}>\r\n                                    <div className=\"grey-text\">\r\n                                        <MDBInput\r\n                                            label=\"Your Name\"\r\n                                            icon=\"user\"\r\n                                            group\r\n                                            type=\"text\"\r\n                                            value={name}\r\n                                            onChange={handleChange(\"name\")}\r\n                                            autoFocus\r\n                                        />\r\n                                        <MDBInput\r\n                                            label=\"Password\"\r\n                                            icon=\"lock\"\r\n                                            group\r\n                                            type=\"password\"\r\n                                            value={password1}\r\n                                            onChange={handleChange(\"password1\")}\r\n                                        />\r\n                                        <MDBInput\r\n                                            label=\"Confirm Password\"\r\n                                            icon=\"lock\"\r\n                                            group\r\n                                            type=\"password\"\r\n                                            value={password2}\r\n                                            onChange={handleChange(\"password2\")}\r\n                                        />\r\n                                    </div>\r\n                                    {validations && validations.length > 0 && validations.map((v, i) => {\r\n                                        return <MDBAlert key={i} className=\"list-group-item list-group-item-danger p-2 m-1\">{v}</MDBAlert>\r\n                                    })}\r\n                                    <div className=\"text-center py-2\">\r\n                                        <MDBBtn\r\n                                            type=\"submit\"\r\n                                            gradient=\"tempting-azure\" rounded block\r\n                                            disabled={!(name && password1 && password2 && validations.length === 0)}>\r\n                                            Complete Registration\r\n                                            </MDBBtn>\r\n                                    </div>\r\n                                </form>\r\n                            </MDBCardBody>\r\n                        </MDBCard>\r\n                    </MDBCol>\r\n                </MDBRow>\r\n            </MDBContainer>\r\n        )\r\n    }\r\n\r\n    //Return Layout\r\n    return (\r\n        registerWithPassword()\r\n    )\r\n}\r\n\r\nexport default UserActivate;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\index.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\userReducer.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\ForgetPassword.js",["268"],"import React, { useState, useEffect } from \"react\";\r\nimport { forgetPasswordFn } from \"../functions/auth\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody, MDBAlert } from 'mdbreact';\r\nconst regexForEmail = /^[a-zA-Z0-9_]+@(?:[a-zA-Z0-9]+\\.)+[A-Za-z]+$/;\r\nconst ForgetPassword = ({ history }) => {\r\n\r\n    const user = useSelector(state => {\r\n        return state.user;\r\n    });\r\n\r\n    //Redirect if user logged in\r\n    useEffect(() => {\r\n        console.log(\"here1\", user.email);\r\n        if (user && user.email && user.token) {\r\n            //redirect to home\r\n            console.log(\"here2\");\r\n            history.push(\"/\");\r\n        }\r\n    }, [user]);\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n\r\n    const [validEmail, setValidEmail] = useState(false);\r\n\r\n    const forgetPasswordForm = () => {\r\n        return (\r\n            <MDBContainer className=\"p-5\">\r\n                <MDBRow>\r\n                    <MDBCol md=\"6\" className=\"offset-md-3\">\r\n                        <MDBCard>\r\n                            <MDBCardBody>\r\n                                <form onSubmit={handleSubmit}>\r\n                                    <p className=\"h4 text-center py-4\">Forget Password</p>\r\n                                    <MDBInput\r\n                                        label=\"Your Email\"\r\n                                        icon=\"envelope\"\r\n                                        group\r\n                                        type=\"email\"\r\n                                        value={email}\r\n                                        onChange={handleEmailChange}\r\n                                        autoFocus\r\n                                    />\r\n                                    {\r\n                                        email\r\n                                        && !validEmail\r\n                                        && (<MDBAlert color=\"danger\">Invalid Email Address</MDBAlert>)\r\n                                    }\r\n                                    <MDBBtn\r\n                                        type=\"submit\"\r\n                                        gradient=\"tempting-azure\" rounded block\r\n                                        disabled={!(validEmail && email.length > 0)}>\r\n                                        Forget Password\r\n                                    </MDBBtn>\r\n                                </form>\r\n                            </MDBCardBody>\r\n                        </MDBCard>\r\n                    </MDBCol>\r\n                </MDBRow>\r\n            </MDBContainer>\r\n\r\n\r\n        )\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        try {\r\n            const res = await forgetPasswordFn(email);\r\n            setEmail(\"\");\r\n            window.alert(res.data.message);\r\n        } catch (err) {\r\n            setEmail(\"\");\r\n            window.alert(err.response.data.error);\r\n        }\r\n    }\r\n\r\n    const handleEmailChange = e => {\r\n        setEmail(e.target.value);\r\n        setValidEmail(regexForEmail.test(e.target.value));\r\n    }\r\n\r\n    return (\r\n        forgetPasswordForm()\r\n        // <div className=\"container p-5\">\r\n        //     <div className=\"row\">\r\n        //         <div className=\"col-md-6 offset-md-3\">\r\n        //             <h4>Forget Password</h4>\r\n        //             {forgetPasswordForm()}\r\n        //         </div>\r\n        //     </div>\r\n        // </div>\r\n    )\r\n}\r\n\r\nexport default ForgetPassword;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\ResetPassword.js",["269","270"],"import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { resetPasswordFn, resetPasswordWithPasswordFn } from \"../functions/auth\";\r\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody, MDBAlert } from 'mdbreact';\r\nlet validationSet = new Set();\r\nlet validationArr = [];\r\nconst passwordRegex = new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,64})\");\r\n\r\nconst ResetPassword = ({ match, history }) => {\r\n\r\n    const user = useSelector(state => {\r\n        return state.user;\r\n    });\r\n\r\n    //redirect base on role\r\n    const roleBasedRedirect = user => {\r\n        console.log(\"roleBasedRedirect\", user);\r\n        if (user.role === \"admin\") {\r\n            history.push(\"/admin/dashboard\");\r\n        }\r\n        else if (user.role === \"normal\") {\r\n            history.push(\"/\");\r\n        }\r\n    }\r\n\r\n    //Redirect if user logged in\r\n    useEffect(() => {\r\n        if (user && user.email && user.token) {\r\n            //redirect\r\n            roleBasedRedirect(user);\r\n        }\r\n    }, [user]);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [validations, setValidations] = useState([]);\r\n    const [formData, setFormData] = useState({\r\n        password1: \"\",\r\n        password2: \"\"\r\n    });\r\n\r\n    const { password1, password2 } = formData;\r\n\r\n    const resetPassword = async token => {\r\n        try {\r\n            const res = await resetPasswordFn(token);\r\n            if (res.status !== 204) {\r\n                window.alert(\"Reset Password Error, please try again\");\r\n                history.push(\"/user/forgetPassword\");\r\n            }\r\n        } catch (err) {\r\n            window.alert(err.response.data.error);\r\n            history.push(\"/user/forgetPassword\");\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const token = match.params.token;\r\n        resetPassword(token);\r\n    }, [])\r\n\r\n\r\n    const resetPasswordForm = () => {\r\n        return (\r\n            <MDBContainer className=\"p-5\">\r\n                <MDBRow>\r\n                    <MDBCol md=\"6\" className=\"offset-md-3\">\r\n                        <MDBCard>\r\n                            <MDBCardBody>\r\n                                <form onSubmit={handleSubmit}>\r\n                                    <p className=\"h4 text-center py-4\">Reset Password</p>\r\n                                    <div className=\"grey-text\">\r\n                                        <MDBInput\r\n                                            label=\"Password\"\r\n                                            icon=\"lock\"\r\n                                            group\r\n                                            type=\"password\"\r\n                                            value={password1}\r\n                                            onChange={handleChange(\"password1\")}\r\n                                        />\r\n                                        <MDBInput\r\n                                            label=\"Confirm Password\"\r\n                                            icon=\"lock\"\r\n                                            group\r\n                                            type=\"password\"\r\n                                            value={password2}\r\n                                            onChange={handleChange(\"password2\")}\r\n                                        />\r\n                                    </div>\r\n                                    {validations && validations.length > 0 && validations.map((v, i) => {\r\n                                        return <MDBAlert key={i} className=\"list-group-item list-group-item-danger p-2 m-1\">{v}</MDBAlert>\r\n                                    })}\r\n                                    <MDBBtn disabled={!(password1 && password2 && validations.length === 0)} gradient=\"tempting-azure\" rounded block type=\"submit\">\r\n                                        Reset Pasword\r\n                                        </MDBBtn>\r\n                                </form>\r\n                            </MDBCardBody>\r\n                        </MDBCard>\r\n                    </MDBCol>\r\n                </MDBRow>\r\n            </MDBContainer>\r\n        )\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        if (password1 === password2) {\r\n            try {\r\n                const res = await resetPasswordWithPasswordFn(match.params.token, password1);\r\n                //clear form data\r\n                setFormData({\r\n                    password1: \"\",\r\n                    password2: \"\"\r\n                });\r\n                //update redux\r\n                dispatch({\r\n                    type: \"LOGGED_IN_USER\",\r\n                    payload: res.data\r\n                });\r\n\r\n                //redirect to home\r\n                roleBasedRedirect(user);\r\n\r\n            } catch (err) {\r\n                window.alert(err.response.data.error);\r\n                history.push(\"/user/forgetPassword\");\r\n            }\r\n        }\r\n        else {\r\n            window.alert(\"ResetPassword Error please try again\");\r\n            setFormData({\r\n                ...formData,\r\n                password1: \"\",\r\n                password2: \"\"\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    const handleChange = text => e => {\r\n        setFormData({ ...formData, [text]: e.target.value });\r\n\r\n        if (text === \"password1\") {\r\n            if (!passwordRegex.test(e.target.value)) {\r\n                validationSet.add(\"Password must be 8 to 64 characters, contain 1 upper, 1 lower, 1 numberic and a special character\");\r\n\r\n            } else {\r\n                validationSet.delete(\"Password must be 8 to 64 characters, contain 1 upper, 1 lower, 1 numberic and a special character\");\r\n            }\r\n            if (e.target.value !== password2) {\r\n                validationSet.add(\"Password and confirm Password don't match\");\r\n            } else {\r\n                validationSet.delete(\"Password and confirm Password don't match\");\r\n            }\r\n        }\r\n\r\n        if (text === \"password2\") {\r\n            if (e.target.value !== password1) {\r\n                validationSet.add(\"Password and confirm Password don't match\");\r\n            } else {\r\n                validationSet.delete(\"Password and confirm Password don't match\");\r\n            }\r\n        }\r\n\r\n        validationArr = [...validationSet];\r\n\r\n        setValidations(validationArr);\r\n    }\r\n\r\n    // Return Layuout\r\n    return (\r\n        resetPasswordForm()\r\n    )\r\n}\r\n\r\nexport default ResetPassword;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\helper\\setBearerToken.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\Footer.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\privateRoutes\\UserRoute.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\user\\PurchaseHistory.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\privateRoutes\\RedirectIfNotSignIn.js",["271"],"import React,{useEffect,useState} from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst RedirectIfNotSignIn = () => {\r\n    const [count, setCount] = useState(5);\r\n    let history = useHistory();\r\n    useEffect(()=>{\r\n        let interval = setInterval(()=>{\r\n            setCount((currentCount)=>--currentCount);\r\n        },1000);\r\n        console.log(interval);\r\n        if(count === 0) {\r\n            history.push(\"/login\");\r\n        }\r\n        return () => {\r\n            console.log(\"inside clear Interval\");\r\n            clearInterval(interval)\r\n        };\r\n        // interval();\r\n    },[count]);\r\n\r\n    //Return Layout\r\n    return (\r\n        <div className=\"container p-5 text-center\">\r\n            <p>Redirecting you to login in {count}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RedirectIfNotSignIn;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\nav\\UserSideBar.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\user\\Wishlist.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\user\\Profile.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\user\\UpdatePassword.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\user.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\privateRoutes\\AdminRoute.js",["272"],"import React, { useEffect, useState } from \"react\";\r\nimport {useDispatch} from  \"react-redux\";\r\nimport { Route } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport RedirectIfNotSignIn from \"./RedirectIfNotSignIn\"\r\nimport { adminCheckFn } from \"../../functions/admin\";\r\nimport getRefreshToken from \"../../helper/getRefreshToken\";\r\nimport { refreshTokenFn } from \"../../functions/auth\";\r\nconst AdminRoute = ({ ...rest }) => {\r\n    console.log(\"AdminRoute.js\");\r\n    const user = useSelector((state) => {\r\n        console.log(\"Inslude use Selector\");\r\n        return state.user;\r\n    });\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [ok, setOk] = useState(false);\r\n\r\n    const adminCheck = async () => {\r\n        try {\r\n            await adminCheckFn(user.token);\r\n            setOk(true);\r\n        }\r\n        catch (err) {\r\n            if (err.response.data.error === \"J01\") {\r\n                //get Refresh Token from local storage\r\n                const rfAuthToken = getRefreshToken();\r\n                if (rfAuthToken === null) { //check if refresh token exist\r\n                    setOk(false);\r\n                }\r\n                else {//refresh token exist, retrieve new refresh token\r\n                    try {\r\n                        const res2 = await refreshTokenFn(rfAuthToken);\r\n                        //update redux state\r\n                        dispatch({\r\n                            type: \"REFRESH_TOKEN\",\r\n                            payload: res2.data\r\n                        });\r\n                        //try with new JWT 2nd time\r\n                        try {\r\n                            await adminCheckFn(res2.data.token);\r\n                            setOk(true);\r\n                        }\r\n                        catch (err) {\r\n                            setOk(false);\r\n                        }\r\n\r\n                    } //error from retrieving refresh token\r\n                    catch (err) {\r\n                        setOk(false);\r\n                    }\r\n                }\r\n            } else { //first call error but not J01\r\n                setOk(false);\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log(\"Admin Route UseEffect\");\r\n        adminCheck();\r\n    }, [user])\r\n\r\n    return ok ? (<Route {...rest} />) : (<RedirectIfNotSignIn />);\r\n}\r\n\r\nexport default AdminRoute;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\AdminDashboard.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\admin.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\helper\\getRefreshToken.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\nav\\AdminSideBar.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\CreateCategory.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\category.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\FilterQuery.js",[],["273","274"],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\CreateSubCategory.js",["275"],"import React, { useEffect, useState } from \"react\";\r\nimport AdminSideBar from \"../../components/nav/AdminSideBar\";\r\nimport { MDBIcon, MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody, MDBAlert, MDBModal, MDBModalHeader, MDBModalBody, MDBModalFooter, MDBBadge } from 'mdbreact';\r\nimport { getCategoriesFn } from \"../../functions/category\";\r\nimport { addSubCategoryFn, listSubCategoryFn, deleteSubCategoryFn, updateSubCategoryFn } from \"../../functions/subCategory\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport getRefreshToken from \"../../helper/getRefreshToken\";\r\nimport { refreshTokenFn } from \"../../functions/auth\";\r\n\r\nconst CreateSubCategory = () => {\r\n    const user = useSelector(state => state.user);\r\n    const dispatch = useDispatch();\r\n    const [categories, setCategories] = useState([]);\r\n    const [subCategories, setSubCategories] = useState([]);\r\n    const [formData, setFormData] = useState({\r\n        parentCategory: \"\",\r\n        subCategory: \"\"\r\n    });\r\n    const { parentCategory, subCategory } = formData;\r\n\r\n    const [updatedFormData, setUpdatedFormData] = useState({\r\n        updatedParentCategory: \"\",\r\n        updatedSubCategory: \"\",\r\n        originalSlug: \"\"\r\n    });\r\n    const { updatedParentCategory, updatedSubCategory, originalSlug } = updatedFormData;\r\n\r\n    const [response, setResponse] = useState({\r\n        message: \"\",\r\n        css: \"\",\r\n    });\r\n    const { message, css } = response;\r\n    const [modalState, setModalState] = useState(false);\r\n\r\n\r\n\r\n    const getCategories = async () => {\r\n        const res = await getCategoriesFn();\r\n        setCategories(res.data);\r\n    }\r\n    const getSubCategories = async () => {\r\n        const res = await listSubCategoryFn();\r\n        setSubCategories(res.data);\r\n    }\r\n    useEffect(() => {\r\n        getCategories();\r\n        getSubCategories();\r\n    }, []);\r\n    const createSubCategoryForm = () => {\r\n        return (<form onSubmit={handleSubmit}>\r\n            <MDBCol><p className=\"h4 py-4\">SubCategory</p></MDBCol>\r\n            <select className=\"browser-default custom-select w-50\" name=\"parentCategory\" onChange={handleChange} value={parentCategory}>\r\n                <option value=\"\">Choose you option</option>\r\n                {categories.map(category => {\r\n                    return <option\r\n                        key={category._id}\r\n                        value={category._id}>\r\n                        {category.name}\r\n                    </option>\r\n                })}\r\n            </select>\r\n            <MDBInput\r\n                label=\"Sub Category Name\"\r\n                outline\r\n                className=\"w-50\"\r\n                type=\"text\"\r\n                name=\"subCategory\"\r\n                value={subCategory}\r\n                onChange={handleChange}\r\n                autoFocus\r\n            />\r\n            <MDBRow>\r\n                <MDBCol size=\"4\" ><MDBBtn color=\"light\" disabled={!(subCategory && parentCategory)} type=\"submit\">Create SubCategory</MDBBtn></MDBCol>\r\n               \r\n                    <MDBAlert color={css}>{message}</MDBAlert>\r\n                \r\n            </MDBRow>\r\n        </form>)\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        try {\r\n            const res = await addSubCategoryFn(subCategory, parentCategory, user.token);\r\n            setResponse({ ...response, message: res.data, css: \"success\" });\r\n            setFormData({\r\n                parentCategory: \"\",\r\n                subCategory: \"\"\r\n            });\r\n            getSubCategories();//render subcategories\r\n        }\r\n        catch (err) {\r\n            if (err.response.data.error === \"J01\") { //retry once\r\n                //get Refresh Token from local storage\r\n                const rfAuthToken = getRefreshToken();\r\n                if (rfAuthToken) {\r\n                    try {\r\n                        const res2 = await refreshTokenFn(rfAuthToken);\r\n                        //update redux state\r\n                        dispatch({\r\n                            type: \"REFRESH_TOKEN\",\r\n                            payload: res2.data\r\n                        });\r\n                        const res3 = await addSubCategoryFn(subCategory, parentCategory, res2.data.token);\r\n                        setResponse({ ...response, message: res3.data, css: \"success\" });\r\n                        setFormData({\r\n                            parentCategory: \"\",\r\n                            subCategory: \"\"\r\n                        });\r\n                        getSubCategories();//render subcategories\r\n                    } catch (err) {//fail second time\r\n                        setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                    }\r\n                } else { //No auth Token\r\n                    setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                }\r\n            } else { //fail not because of auth token\r\n                setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleChange = e => {\r\n        setFormData(\r\n            { ...formData, [e.target.name]: e.target.value }\r\n        );\r\n    }\r\n\r\n    const displaySubCategoriesCard = () => {\r\n        return (\r\n            <MDBRow>\r\n                {subCategories.filter(sc1 => { return sc1.name.includes(subCategory) }).map((sc2) => {\r\n                    return (\r\n                        <MDBCol md=\"4\" key={sc2._id}>\r\n                            <MDBAlert color=\"secondary\">\r\n                                <div className=\"font-italic font-weight-lighter small-font\">{sc2.parentCategory.name}</div>\r\n                                {sc2.name}\r\n                                <MDBIcon\r\n                                    onClick={() => handleSubCategoryDelete(sc2.slug)}\r\n                                    className=\"float-right pt-1 text-danger\"\r\n                                    style={{ cursor: 'pointer' }}\r\n                                    far\r\n                                    icon=\"trash-alt\" />\r\n\r\n                                <MDBIcon className=\"float-right pt-1 pr-3 text-warning\"\r\n                                    style={{ cursor: 'pointer' }}\r\n                                    far\r\n                                    icon=\"edit\"\r\n                                    onClick={() => handleToggleOpen(sc2)}\r\n                                />\r\n                                <br />\r\n                            </MDBAlert>\r\n                            <MDBModal isOpen={modalState} toggle={handleToggleClose} modalStyle=\"warning\" backdrop={false}>\r\n                                <MDBModalHeader toggle={handleToggleClose}>Update Subcategory</MDBModalHeader>\r\n                                <MDBModalBody>\r\n                                    <select className=\"browser-default custom-select\" name=\"updatedParentCategory\" onChange={e => setUpdatedFormData({ ...updatedFormData, [e.target.name]: e.target.value })} value={updatedParentCategory}>\r\n\r\n                                        {categories.map(category2 => {\r\n                                            return <option\r\n                                                key={category2._id}\r\n                                                value={category2._id}>\r\n                                                {category2.name}\r\n                                            </option>\r\n                                        })}\r\n                                    </select>\r\n\r\n                                    <MDBInput\r\n                                        label=\"Subcategory Name\"\r\n                                        outline\r\n                                        type=\"text\"\r\n                                        value={updatedSubCategory}\r\n                                        name=\"updatedSubCategory\"\r\n                                        onChange={e => setUpdatedFormData({ ...updatedFormData, [e.target.name]: e.target.value })}\r\n                                        autoFocus\r\n                                    />\r\n                                </MDBModalBody>\r\n                                <MDBModalFooter>\r\n                                    <MDBBtn color=\"danger\" onClick={handleToggleClose}>Close</MDBBtn>\r\n                                    <MDBBtn color=\"success\" onClick={handleUpdate}>Save changes</MDBBtn>\r\n                                </MDBModalFooter>\r\n                            </MDBModal>\r\n\r\n                        </MDBCol>\r\n                    )\r\n                })}\r\n            </MDBRow>\r\n        )\r\n    }// End displaySubCategoriesCard\r\n\r\n    const handleSubCategoryDelete = async subCategorySlug => {\r\n        try {\r\n            const res = await deleteSubCategoryFn(subCategorySlug, user.token);\r\n            setResponse({ ...response, message: res.data, css: \"success\" });\r\n            getSubCategories();//render sub categories\r\n\r\n        }\r\n        catch (err) {\r\n            if (err.response.data.error === \"J01\") { //retry once\r\n                //get Refresh Token from local storage\r\n                const rfAuthToken = getRefreshToken();\r\n                if (rfAuthToken) {\r\n                    try {\r\n                        const res2 = await refreshTokenFn(rfAuthToken);\r\n                        //update redux state\r\n                        dispatch({\r\n                            type: \"REFRESH_TOKEN\",\r\n                            payload: res2.data\r\n                        });\r\n                        const res3 = await deleteSubCategoryFn(subCategorySlug, res2.data.token);\r\n                        setResponse({ ...response, message: res3.data, css: \"success\" });\r\n                        getSubCategories();//render sub categories\r\n                    }\r\n                    catch (err) {\r\n                        setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                    }\r\n                }\r\n            } else {\r\n                setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n            }\r\n        }\r\n    }//End handleSubCategoryDelete\r\n\r\n    const handleToggleOpen = sc => {\r\n        setModalState(!modalState);\r\n        setUpdatedFormData({ ...updatedFormData, updatedParentCategory: sc.parentCategory._id, updatedSubCategory: sc.name, originalSlug: sc.slug })\r\n    }\r\n    const handleToggleClose = () => {\r\n        setModalState(!modalState);\r\n    }\r\n\r\n    const handleUpdate = async () => {\r\n        try {\r\n            const res = await updateSubCategoryFn(originalSlug, updatedFormData, user.token);\r\n            setResponse({ ...response, message: res.data, css: \"success\" });\r\n            getSubCategories(); //reload components\r\n        }\r\n        catch (err) {\r\n            if (err.response.data.error === \"J01\") { //retry once\r\n                //get Refresh Token from local storage\r\n                const rfAuthToken = getRefreshToken();\r\n                if (rfAuthToken) {\r\n                    try {\r\n                        const res2 = await refreshTokenFn(rfAuthToken);\r\n                        //update redux state\r\n                        dispatch({\r\n                            type: \"REFRESH_TOKEN\",\r\n                            payload: res2.data\r\n                        });\r\n                        const res3 = await updateSubCategoryFn(originalSlug, updatedFormData, res2.data.token);\r\n                        setResponse({ ...response, message: res3.data, css: \"success\" });\r\n                        getSubCategories(); //reload components\r\n                    }\r\n                    catch (err) {\r\n                        setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                    }\r\n                } else {\r\n                    setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                }\r\n            } else {\r\n                setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n            }\r\n        }\r\n        setModalState(!modalState);\r\n    }\r\n\r\n    //render UI\r\n    return (<div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n            <AdminSideBar />\r\n        </div>\r\n        <div className=\"col-md-10\">\r\n            <MDBCard className=\"p-3 mt-5\">\r\n                {createSubCategoryForm()}\r\n\r\n                <hr />\r\n                {/* {JSON.stringify(subCategories)} */}\r\n                {/* <FilterQuery searchQuery={searchQuery} setSearchQuery={setSearchQuery} />\r\n                {/* { searchInput()} */}\r\n                <MDBCardBody cascade className=\"center\">\r\n                    {displaySubCategoriesCard()}\r\n                </MDBCardBody>\r\n            </MDBCard>\r\n        </div>\r\n    </div>);\r\n}\r\nexport default CreateSubCategory;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\subCategory.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\CreateProduct.js",["276","277","278","279","280"],"import React, { useEffect, useState } from \"react\";\r\nimport { getCategoriesFn } from \"../../functions/category\";\r\nimport { listSubCategoriesByCategoryFn } from \"../../functions/subCategory\";\r\nimport { shippingProvidersFn } from \"../../functions/shipping\";\r\nimport { addProductFn } from \"../../functions/product\";\r\nimport AdminSideBar from \"../../components/nav/AdminSideBar\";\r\nimport { MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBAlert } from 'mdbreact';\r\nimport { Select, Upload, Modal } from \"antd\";\r\nimport { PlusOutlined } from '@ant-design/icons';\r\nimport ImgCrop from \"antd-img-crop\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport getRefreshToken from \"../../helper/getRefreshToken\";\r\nimport { refreshTokenFn } from \"../../functions/auth\";\r\n\r\n//for preview function\r\nconst getBase64 = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => resolve(reader.result);\r\n        reader.onerror = error => reject(error);\r\n    });\r\n}\r\n//convert dataURL to file. This function will be called when new images is updated.\r\nconst dataURLtoFile = (dataurl, filename) => {\r\n\r\n    var arr = dataurl.split(','),\r\n        mime = arr[0].match(/:(.*?);/)[1],\r\n        bstr = atob(arr[1]),\r\n        n = bstr.length,\r\n        u8arr = new Uint8Array(n);\r\n\r\n    while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n\r\n    return new File([u8arr], filename, { type: mime });\r\n}\r\n//Initial State for form data to Server\r\nconst initialState = {\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    availableQuantity: \"\",\r\n    sold: \"\",\r\n    images: {},\r\n    ratings: [],\r\n    color: [],\r\n    category: \"\",\r\n    subCategories: [],\r\n    brand: \"\",\r\n    shippingProvider: [],\r\n}\r\n//database categories, subcategories on selected category and all shipping provider\r\nconst initialLoadDataState = {\r\n    loadCategories: [],\r\n    loadSubCategoriesByCategory: [],\r\n    loadShippingProvider: []\r\n}\r\n//Initial State for antdesign image upload\r\nconst initialImageState = {\r\n    previewVisible: false,\r\n    previewImage: '',\r\n    previewTitle: '',\r\n    fileList: [\r\n    ]\r\n}\r\n\r\nconst CreateProduct = () => {\r\n\r\n    const user = useSelector(state => state.user);\r\n    const dispatch = useDispatch();\r\n    //form data state to push to server\r\n    const [formData, setFormData] = useState(initialState);\r\n    const { name, description, price, availableQuantity, sold, images, ratings, color, category, subCategories, brand, shippingProvider } = formData;\r\n    //database state\r\n    const [loadData, setLoadData] = useState(initialLoadDataState);\r\n    const { loadCategories, loadSubCategoriesByCategory, loadShippingProvider } = loadData;\r\n    //for ant design upload image\r\n    const [imageState, setImageState] = useState(initialImageState);\r\n\r\n    //fetch all database's shipping providers and set to loadData state\r\n    const getShippingProviders = async () => {\r\n        const res = await shippingProvidersFn();\r\n        setLoadData(prevLoadData => ({\r\n            ...prevLoadData, loadShippingProvider: res.data\r\n        }))\r\n    }\r\n    //fetch all database's categories and set to loadData state\r\n    const getCategories = async () => {\r\n        const res = await getCategoriesFn();\r\n        setLoadData(prevLoadData => ({\r\n            ...prevLoadData, loadCategories: res.data\r\n        }))\r\n    };\r\n    //update successful or fail response from backend\r\n    const [response, setResponse] = useState({\r\n        message: \"\",\r\n        css: null,\r\n    });\r\n    const { message, css } = response;\r\n\r\n    useEffect(() => {\r\n        getCategories();\r\n\r\n    }, []);\r\n    useEffect(() => {\r\n        getShippingProviders();\r\n    }, []);\r\n\r\n    //create product form\r\n    const createProductForm = () => {\r\n        return (\r\n            <form onSubmit={handleSubmit}>\r\n                <MDBCol><p className=\"h4 py-4\">Create Product</p></MDBCol>\r\n                <MDBInput\r\n                    label=\"name\"\r\n                    outline\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    value={name}\r\n                    onChange={handleChange}\r\n                    autoFocus\r\n                />\r\n                <MDBInput\r\n                    label=\"description\"\r\n                    outline\r\n                    type=\"textarea\"\r\n                    name=\"description\"\r\n                    value={description}\r\n                    onChange={handleChange}\r\n                />\r\n                <MDBInput\r\n                    label=\"price\"\r\n                    outline\r\n                    type=\"number\"\r\n                    name=\"price\"\r\n                    value={price}\r\n                    onChange={handleChange}\r\n                />\r\n                <MDBInput\r\n                    label=\"availableQuantity\"\r\n                    outline\r\n                    type=\"number\"\r\n                    name=\"availableQuantity\"\r\n                    value={availableQuantity}\r\n                    onChange={handleChange}\r\n                />\r\n                <Select\r\n                    mode=\"multiple\"\r\n                    className=\"w-100\"\r\n                    placeholder=\"Select Available Shipping Providers\"\r\n                    value={shippingProvider}\r\n                    onChange={shippingProviderData => setFormData({ ...formData, shippingProvider: shippingProviderData })}\r\n                >\r\n                    {loadShippingProvider.map((sp) => {\r\n                        return <Select.Option key={sp._id} value={sp._id}>{sp.name}</Select.Option>\r\n                    })}\r\n                </Select>\r\n                <br /><br />\r\n                <select\r\n                    className=\"custom-select w-100\"\r\n                    name=\"category\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option value=\"\">Select A Category</option>\r\n                    {loadCategories.map(c => {\r\n                        return <option key={c._id} value={c._id}>{c.name}</option>\r\n                    })}\r\n                </select>\r\n                <br /><br />\r\n                {loadSubCategoriesByCategory && loadSubCategoriesByCategory.length > 0 &&\r\n                    (\r\n                        <>\r\n                            <Select\r\n                                mode=\"multiple\"\r\n                                className=\"w-100\"\r\n                                placeholder=\"Select Sub Categories\"\r\n                                value={subCategories}\r\n                                onChange={subData => setFormData({ ...formData, subCategories: subData })}\r\n                            >\r\n                                {loadSubCategoriesByCategory.map(lsc => {\r\n                                    return <Select.Option key={lsc._id} value={lsc._id}>{lsc.name}</Select.Option>\r\n                                })}\r\n                            </Select>\r\n                            <br /><br />\r\n                        </>)}\r\n                <MDBRow>\r\n                    <MDBCol size=\"4\" ><MDBBtn color=\"light\" disabled={!(name && price && availableQuantity && category)} type=\"submit\">Create Product</MDBBtn></MDBCol>\r\n                    <MDBAlert color={css}>{message}</MDBAlert>\r\n                </MDBRow>\r\n            </form>\r\n        );\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n\r\n        //set multi part form data request\r\n        let formDataReq = new FormData();\r\n        formDataReq.append(\"name\", name);\r\n        formDataReq.append(\"description\", description);\r\n        formDataReq.append(\"price\", price);\r\n        formDataReq.append(\"availableQuantity\", availableQuantity);\r\n        formDataReq.append(\"category\", category);\r\n        formDataReq.append(\"subCategories\", subCategories);\r\n        formDataReq.append(\"shippingProvider\", shippingProvider);\r\n\r\n        imageState.fileList.forEach((fileListItem, index) => {\r\n            console.log(fileListItem);\r\n            let imageFileName = fileListItem.name + index + Math.floor(Date.now() / 1000); // imageFileName = imagename +timestamp\r\n            let imageFileBase64 = fileListItem.url; //image data in base64, use preview which give a better quality\r\n            let fileExtension = imageFileBase64.substring(\"data:image/\".length, imageFileBase64.indexOf(\";base64\"));//image extension\r\n            let file = dataURLtoFile(imageFileBase64, imageFileName + \".\" + fileExtension);//Convert imageData in base64 to image file format. The 1st parameter is the base64 string, second parameter is the filename\r\n            formDataReq.append(\"images\", file);\r\n        });\r\n\r\n        //clear all state to when success to allow next product to be added\r\n        try {\r\n            const res = await addProductFn(formDataReq, user.token);\r\n            setFormData(initialState);\r\n            setLoadData(initialLoadDataState);\r\n            setImageState(initialImageState);\r\n            getCategories();\r\n            getShippingProviders();\r\n            setResponse({ ...response, message: res.data, css: \"success\" });\r\n\r\n        } catch (err) {\r\n            if (err.response.data.error === \"J01\") {\r\n                const rfAuthToken = getRefreshToken();\r\n                if (rfAuthToken) {\r\n                    try {\r\n                        const res2 = await refreshTokenFn(rfAuthToken);\r\n                        //update redux state\r\n                        dispatch({\r\n                            type: \"REFRESH_TOKEN\",\r\n                            payload: res2.data\r\n                        });\r\n                        const res3 = await addProductFn(formDataReq, res2.data.token);\r\n                        setFormData(initialState);\r\n                        setLoadData(initialLoadDataState);\r\n                        setImageState(initialImageState);\r\n                        getCategories();\r\n                        getShippingProviders();\r\n                        setResponse({ ...response, message: res3.data, css: \"success\" });\r\n                    } catch (err) {\r\n                        setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                    }\r\n                }\r\n            } else { //fail not because of auth token\r\n                setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleChange = async e => {\r\n        //if category was changed, clear subcategories and get subcategories based on the changed selected category\r\n        if (e.target.name === \"category\") {\r\n            if (e.target.value === \"\") {\r\n                setFormData({ ...formData, subCategories: [], category: e.target.value })\r\n                setLoadData({ ...loadData, loadSubCategoriesByCategory: [] });\r\n            } else {\r\n                setFormData({ ...formData, subCategories: [], category: e.target.value })\r\n                const res = await listSubCategoriesByCategoryFn(e.target.value);\r\n                setLoadData({ ...loadData, loadSubCategoriesByCategory: res.data });\r\n            }\r\n        } else {\r\n            setFormData({ ...formData, [e.target.name]: e.target.value });\r\n        }\r\n    }\r\n\r\n    const handleModalCancel = () => {\r\n        return setImageState({ ...imageState, previewVisible: false })\r\n    }\r\n    const handlePreview = async file => {\r\n        if (!file.url && !file.preview) {\r\n            file.preview = await getBase64(file.originFileObj);\r\n        }\r\n        setImageState({\r\n            ...imageState,\r\n            previewImage: file.url || file.preview,\r\n            previewVisible: true,\r\n            previewTitle: file.name || file.url.substring(file.url.lastIndexOf('/') + 1),\r\n        })\r\n    };\r\n\r\n    const handleImageChange = async (data) => {\r\n        const reader = new FileReader();\r\n        //onload takes a call back function, e.target.result will be the result return by readAsDataURL\r\n        reader.onload = e => {\r\n            data.file.url = e.target.result;\r\n            return setImageState({\r\n                ...imageState,\r\n                fileList: data.fileList\r\n            })\r\n        } //end onload\r\n        reader.readAsDataURL(data.file.originFileObj);\r\n    };\r\n    //upload button icon\r\n    const uploadButton = () => {\r\n        return <div>\r\n            <PlusOutlined />\r\n            <div style={{ marginTop: 8 }}>Upload</div>\r\n        </div>\r\n    }\r\n    //dummyRequest for that always return ok\r\n    const dummyRequest = ({ file, onSuccess }) => {\r\n        setTimeout(() => {\r\n            onSuccess(\"ok\");\r\n        }, 0);\r\n    };\r\n\r\n    const uploadImageForm = () => {\r\n        return (\r\n            <div className=\"col-centered\">\r\n                <ImgCrop rotate>\r\n                    <Upload\r\n                        customRequest={dummyRequest} //always return ok, not exactly sure what is this\r\n                        listType=\"picture-card\"\r\n                        fileList={imageState.fileList}\r\n                        onPreview={handlePreview}\r\n                        onChange={handleImageChange}\r\n                    >\r\n                        {imageState.fileList.length >= 8 ? null : uploadButton()}\r\n                    </Upload>\r\n                </ImgCrop>\r\n                <Modal\r\n                    visible={imageState.previewVisible}\r\n                    // title={imageState.previewTitle}\r\n                    footer={null}\r\n                    onCancel={handleModalCancel}\r\n                >\r\n                    <img alt=\"example\" style={{ width: '100%' }} src={imageState.previewImage} />\r\n                </Modal>\r\n            </div>\r\n        )\r\n    };\r\n\r\n    //render UI\r\n    return (<div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n            <AdminSideBar />\r\n        </div>\r\n        <div className=\"col-md-10\">\r\n            <MDBCard className=\"p-3 mt-5\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-8\">\r\n                        {createProductForm()}\r\n                    </div>\r\n                    <div className=\"col-md-4\">\r\n                        {uploadImageForm()}\r\n                    </div>\r\n                </div>\r\n            </MDBCard>\r\n        </div>\r\n\r\n    </div>);\r\n}\r\n\r\nexport default CreateProduct;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\shipping.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\product.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\ViewAllProducts.js",["281","282","283","284","285"],"import React, { useState, useEffect } from \"react\";\r\nimport AdminSideBar from \"../../components/nav/AdminSideBar\";\r\nimport { MDBIcon, MDBCard } from 'mdbreact';\r\nimport { getProductsFn, deleteProductFn } from \"../../functions/product\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport getRefreshToken from \"../../helper/getRefreshToken\";\r\nimport { refreshTokenFn } from \"../../functions/auth\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Link } from \"react-router-dom\";\r\nimport ProductCard from \"../../components/ProductCard\";\r\n\r\n\r\nconst ViewAllProduct = ({ history }) => {\r\n    const user = useSelector(state => state.user);\r\n    const dispatch = useDispatch();\r\n    const [products, setProducts] = useState([]);\r\n    const getProducts = async () => {\r\n        const res = await getProductsFn();\r\n        setProducts(res.data);\r\n    }\r\n    const [response, setResponse] = useState({\r\n        message: \"\",\r\n        css: \"\",\r\n    });\r\n\r\n    // const [showToast, setShowToast] = useState(false);\r\n\r\n    //load all products\r\n    useEffect(() => {\r\n        getProducts();\r\n    }, []);\r\n\r\n    //handleDelete\r\n    const handleDelete = async (slug) => {\r\n        try {\r\n            const res = await deleteProductFn(slug, user.token);\r\n            setResponse({ ...response, message: res.data, css: \"success\" });\r\n            // setShowToast(true);\r\n            console.log(res);\r\n            toast.success(res.data);\r\n            getProducts();//render products\r\n        } catch (err) {\r\n            if (err.response.data.error === \"J01\") { //retry once\r\n                //get Refresh Token from local storage\r\n                const rfAuthToken = getRefreshToken();\r\n                if (rfAuthToken) {\r\n                    try {\r\n                        const res2 = await refreshTokenFn(rfAuthToken);\r\n                        //update redux state\r\n                        dispatch({\r\n                            type: \"REFRESH_TOKEN\",\r\n                            payload: res2.data\r\n                        });\r\n                        const res3 = await deleteProductFn(slug, res2.data.token);\r\n                        setResponse({ ...response, message: res3.data, css: \"success\" });\r\n                        toast.success(res3.data);\r\n                        getProducts();//render products\r\n                    } catch (err) {//fail second time\r\n                        setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                        toast.error(err.response.data.error);\r\n                    }\r\n                } else { //No auth Token\r\n                    setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                    toast.error(err.response.data.error);\r\n                }\r\n            } else { //fail not because of auth token\r\n                setResponse({ ...response, message: err.response.data.error, css: \"danger\" });\r\n                toast.error(err.response.data.error);\r\n            }\r\n        }\r\n    }\r\n    //handleEdit\r\n    const handleEdit = async slug => {\r\n        history.push(\"\")\r\n    }\r\n\r\n    const ViewAllProductForm = () => {\r\n        return (\r\n            <ProductCard\r\n                handleDelete={handleDelete}\r\n                products={products}\r\n                user={user}\r\n            />\r\n            // <div className=\"row\"\r\n            // >\r\n            //     {products.map(p => {\r\n            //         return (\r\n            //             <div className=\"col-md-3 mb-3 d-flex align-items-stretch\" key={p._id}>\r\n            //                 <div className=\"card pb-2\" >\r\n            //                     <div className=\"view overlay\">\r\n            //                         {/* image here */}\r\n            //                         <img\r\n            //                             // style={{ height: '10rem' }} \r\n            //                             src={`${process.env.REACT_APP_AWSS3DIR}/${p.images[0]}`} className=\"card-img-top\" alt=\"\">\r\n            //                         </img>\r\n            //                         <div className=\"card-body\">\r\n            //                             <div className=\"font-weight-bolder\">\r\n            //                                 {p.name}\r\n            //                             </div>\r\n            //                             <div className=\"deep-orange-text\">\r\n            //                                 ${p.price}\r\n            //                             </div>\r\n            //                             <div className=\"font-weight-light\" style={{ fontSize: \"12px\" }}>\r\n            //                                 {p.description && p.description.length > 30 ? `${p.description.substring(0, 30)}...` : p.description}\r\n            //                             </div>\r\n            //                             <div className=\"mt-1\">\r\n            //                                 <span className=\"float-left mr-2 block\"><MDBIcon far icon=\"heart\" /></span>\r\n            //                                 <span className=\"block ml-3\"><MDBIcon far icon=\"star\" /><MDBIcon far icon=\"star\" /><MDBIcon far icon=\"star\" /><MDBIcon far icon=\"star\" /><MDBIcon far icon=\"star\" /></span>\r\n            //                                 <span className=\"float-right block mt-1\" style={{ fontSize: \"13px\" }}>{p.sold} sold</span>\r\n            //                             </div>\r\n            //                             <div className=\"mt-1\">\r\n            //                                 <MDBIcon\r\n            //                                     onClick={() => handleDelete(p.slug)}\r\n            //                                     className=\"float-right pt-1 text-danger\"\r\n            //                                     style={{ cursor: 'pointer' }}\r\n            //                                     far\r\n            //                                     icon=\"trash-alt\" />\r\n\r\n            //                                 <Link to={`/admin/updateProduct/${p.slug}`}>\r\n            //                                     <MDBIcon className=\"float-right pt-1 pr-3 text-warning\"\r\n            //                                         style={{ cursor: 'pointer' }}\r\n            //                                         far\r\n            //                                         icon=\"edit\"\r\n            //                                     // onClick={() => handleEdit(p.slug)}\r\n            //                                     />\r\n            //                                 </Link>\r\n            //                             </div>\r\n            //                         </div>\r\n            //                     </div>\r\n            //                 </div>\r\n            //             </div>\r\n            //         )\r\n            //     })}\r\n            // </div>\r\n        )\r\n    }\r\n\r\n    //render UI\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col-md-2\">\r\n                <AdminSideBar />\r\n            </div>\r\n            <div className=\"col-md-10\">\r\n                <div className=\"row pl-3 pt-2 pb-2 mt-3\">\r\n                    <h4>All Products</h4>\r\n                </div>\r\n                {ViewAllProductForm()}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ViewAllProduct;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\admin\\UpdateProduct.js",["286","287","288","289","290","291","292"],"import React, { useEffect, useState } from \"react\";\r\nimport AdminSideBar from \"../../components/nav/AdminSideBar\";\r\nimport { MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard } from 'mdbreact';\r\nimport { getProductFn, updateProductFn } from \"../../functions/product\";\r\nimport { getCategoriesFn } from \"../../functions/category\";\r\nimport { listSubCategoriesByCategoryFn } from \"../../functions/subCategory\";\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { shippingProvidersFn } from \"../../functions/shipping\";\r\nimport { Select, Upload, Modal } from \"antd\";\r\nimport { PlusOutlined } from '@ant-design/icons';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport getRefreshToken from \"../../helper/getRefreshToken\";\r\nimport { refreshTokenFn } from \"../../functions/auth\";\r\nimport ImgCrop from \"antd-img-crop\";\r\n\r\n//for preview function\r\nconst getBase64 = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => resolve(reader.result);\r\n        reader.onerror = error => reject(error);\r\n    });\r\n}\r\n//convert dataURL to file. This function will be called when new images is updated.\r\nconst dataURLtoFile = (dataurl, filename) => {\r\n    var arr = dataurl.split(','),\r\n        mime = arr[0].match(/:(.*?);/)[1],\r\n        bstr = atob(arr[1]),\r\n        n = bstr.length,\r\n        u8arr = new Uint8Array(n);\r\n\r\n    while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n\r\n    return new File([u8arr], filename, { type: mime });\r\n}\r\n//Initial State for form data to Server\r\nconst initialState = {\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    availableQuantity: \"\",\r\n    sold: \"\",\r\n    images: [],\r\n    ratings: [],\r\n    color: [],\r\n    category: \"\",\r\n    subCategories: [],\r\n    brand: \"\",\r\n    shippingProvider: [],\r\n}\r\n\r\n//database categories, subcategories on selected category and all shipping provider\r\nconst initialLoadDataState = {\r\n    loadCategories: [],\r\n    loadSubCategoriesByCategory: [],\r\n    loadShippingProviders: []\r\n}\r\n//Product's parent category, subcategory and shipping provider state\r\nconst initialShowDataState = {\r\n    showCategory: \"\",\r\n    showSubCategoriesByCategory: [],\r\n    showShippingProviders: []\r\n}\r\n//Initial State for antdesign image upload\r\nconst initialImageState = {\r\n    previewVisible: false,\r\n    previewImage: '',\r\n    previewTitle: '',\r\n    fileList: [\r\n    ]\r\n}\r\n\r\nconst UpdateProduct = ({ match, history }) => {\r\n    const user = useSelector(state => state.user);\r\n    const dispatch = useDispatch();\r\n\r\n    //form data state to push to server\r\n    const [formData, setFormData] = useState(initialState);\r\n    const { name, description, price, availableQuantity, sold, images, ratings, color, category, subCategories, brand, shippingProvider } = formData;\r\n    //database state\r\n    const [loadData, setLoadData] = useState(initialLoadDataState);\r\n    const { loadCategories, loadSubCategoriesByCategory, loadShippingProviders } = loadData;\r\n    //Product state\r\n    const [showData, setShowData] = useState(initialShowDataState);\r\n    const { showCategory, showSubCategoriesByCategory, showShippingProviders } = showData;\r\n    //for ant design upload image\r\n    const [imageState, setImageState] = useState(initialImageState);\r\n    //fetch all database's shipping providers and set to loadData state\r\n    const getShippingProviders = async () => {\r\n        const res = await shippingProvidersFn();\r\n        setLoadData(prevLoadData => ({\r\n            ...prevLoadData, loadShippingProviders: res.data\r\n        }))\r\n    };\r\n    //fetch all database's categories and set to loadData state\r\n    const getCategories = async () => {\r\n        const res = await getCategoriesFn();\r\n        setLoadData(prevLoadData => ({ ...prevLoadData, loadCategories: res.data }));\r\n    }\r\n    //fetch all database's categories on selected category and set to loadData state\r\n    const getSubCategoriesByCategory = async categoryID => {\r\n        try {\r\n            const subCategoriesRes = await listSubCategoriesByCategoryFn(categoryID);\r\n            setLoadData(prevLoadData => ({ ...prevLoadData, loadSubCategoriesByCategory: subCategoriesRes.data }));\r\n        } catch (err) {\r\n            toast.error(err.response.data.error);\r\n        }\r\n    }\r\n    //get current product data \r\n    const getProduct = async () => {\r\n        try {\r\n            const res = await getProductFn(match.params.slug);\r\n            //only retrieve IDs for subcategory, shipping provider which will be easier to update on backend\r\n            let subCategoriesIDs = res.data.subCategories.map(sc => sc._id);\r\n            let shippingProviderIDs = res.data.shippingProvider.map(sp => sp._id);\r\n            setFormData(prevState => ({\r\n                ...prevState,\r\n                name: res.data.name,\r\n                description: res.data.description,\r\n                price: res.data.price,\r\n                availableQuantity: res.data.availableQuantity,\r\n                sold: res.data.sold,\r\n                images: res.data.images,\r\n                ratings: res.data.ratings,\r\n                color: res.data.color,\r\n                category: res.data.category._id,\r\n                subCategories: subCategoriesIDs,\r\n                brand: res.data.brand,\r\n                shippingProvider: shippingProviderIDs,\r\n            })\r\n            );\r\n            //Displaying product images, by setting Imagestate require uid, name, status, url in each fileList object\r\n            let fileListArray = [];\r\n            let fileListObj = {};\r\n            res.data.images.forEach(async (image, index) => {\r\n                fileListObj.uid = index;\r\n                fileListObj.name = image;\r\n                fileListObj.status = \"done\";\r\n                fileListObj.url = `${process.env.REACT_APP_AWSS3DIR}/${image}`;\r\n                fileListArray.push(fileListObj);\r\n                fileListObj = {};\r\n            });\r\n            setImageState({\r\n                ...imageState,\r\n                fileList: fileListArray\r\n            });\r\n            //Display product category, subcategories and shipping Provider and set to showData state which shows the multiselect and select component\r\n            let shippingProviderArray = [];\r\n            res.data.shippingProvider.map(sp => {\r\n                return shippingProviderArray.push(sp._id);\r\n            });\r\n            let subCategoriesArray = [];\r\n            res.data.subCategories && res.data.subCategories.length > 0 && res.data.subCategories.map(sc => {\r\n                return subCategoriesArray.push(sc._id);\r\n            })\r\n            setShowData({\r\n                ...showData,\r\n                showShippingProviders: shippingProviderArray,\r\n                showCategory: res.data.category,\r\n                showSubCategoriesByCategory: subCategoriesArray\r\n            });\r\n            //load other subcategories base on existing category\r\n            getSubCategoriesByCategory(res.data.category._id);\r\n        } catch (err) {\r\n            toast.error(err.response.data.error);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getShippingProviders();\r\n    }, []);\r\n    useEffect(() => {\r\n        getCategories();\r\n    }, []);\r\n    useEffect(() => {\r\n        getProduct();\r\n    }, []);\r\n\r\n    //Update product form exclude antd upload image\r\n    const updateProductForm = () => {\r\n        return (\r\n            <form onSubmit={handleSubmit}>\r\n                <MDBCol><p className=\"h4 py-4\">{`Update ${formData.name}`}</p></MDBCol>\r\n                <MDBInput\r\n                    label=\"name\"\r\n                    outline\r\n                    type=\"text\"\r\n                    name=\"name\"\r\n                    value={name}\r\n                    onChange={handleChange}\r\n                    autoFocus\r\n                />\r\n                <MDBInput\r\n                    label=\"description\"\r\n                    outline\r\n                    type=\"textarea\"\r\n                    name=\"description\"\r\n                    value={description}\r\n                    onChange={handleChange}\r\n                />\r\n                <MDBInput\r\n                    label=\"price\"\r\n                    outline\r\n                    type=\"number\"\r\n                    name=\"price\"\r\n                    value={price}\r\n                    onChange={handleChange}\r\n                />\r\n                <MDBInput\r\n                    label=\"availableQuantity\"\r\n                    outline\r\n                    type=\"number\"\r\n                    name=\"availableQuantity\"\r\n                    value={availableQuantity}\r\n                    onChange={handleChange}\r\n                />\r\n                <Select\r\n                    mode=\"multiple\"\r\n                    allowClear\r\n                    className=\"w-100\"\r\n                    placeholder=\"Select Available Shipping Providers\"\r\n                    value={showShippingProviders}\r\n                    onChange={value => {\r\n                        setShowData({ ...showData, showShippingProviders: value });\r\n                        setFormData({ ...formData, shippingProvider: value });\r\n                    }\r\n                    }\r\n                >\r\n                    {loadShippingProviders.map((sp) => {\r\n                        return <Select.Option key={sp._id} value={sp._id}>{sp.name}</Select.Option>\r\n                    })}\r\n                </Select>\r\n                <br /><br />\r\n                <select\r\n                    className=\"custom-select w-100\"\r\n                    name=\"category\"\r\n                    onChange={handleCategoryChange}\r\n                    value={category}\r\n                >\r\n                    {loadCategories.map(c => {\r\n                        return <option key={c._id} value={c._id}>{c.name}</option>\r\n                    })}\r\n                </select>\r\n                <br /><br />\r\n                {\r\n                    loadSubCategoriesByCategory && loadSubCategoriesByCategory.length > 0 &&\r\n                    (\r\n                        <>\r\n                            <Select\r\n                                mode=\"multiple\"\r\n                                allowClear\r\n                                className=\"w-100\"\r\n                                placeholder=\"Select Sub Categories\"\r\n                                value={showSubCategoriesByCategory}\r\n                                onChange={value => {\r\n                                    setShowData({ ...showData, showSubCategoriesByCategory: value });\r\n                                    setFormData({ ...formData, subCategories: value });\r\n                                }}\r\n                            >\r\n                                {loadSubCategoriesByCategory.map(lsc => {\r\n                                    return <Select.Option key={lsc._id} value={lsc._id}>{lsc.name}</Select.Option>\r\n                                })}\r\n                            </Select>\r\n                            <br /><br />\r\n                        </>)\r\n                }\r\n\r\n                <MDBRow>\r\n                    <MDBCol size=\"4\" ><MDBBtn color=\"light\" disabled={!(name && price && availableQuantity && category)} type=\"submit\">Update</MDBBtn></MDBCol>\r\n                </MDBRow>\r\n            </form >\r\n        );\r\n    }\r\n    //handle change for input type text\r\n    const handleChange = e => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    }\r\n    //handle change for category. when category changed, clear subcategories. Also load sub categories based on changed category.\r\n    const handleCategoryChange = e => {\r\n        //clear Sub Categories\r\n        setFormData({ ...formData, category: e.target.value, subCategories: [] });\r\n        setShowData({ ...showData, showSubCategoriesByCategory: [] });\r\n        //Reload Sub category when category changed\r\n        getSubCategoriesByCategory(e.target.value);\r\n    }\r\n    //on Submit\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        //set multi part form data request\r\n        let formDataReq = new FormData();\r\n        formDataReq.append(\"name\", name);\r\n        formDataReq.append(\"description\", description);\r\n        formDataReq.append(\"price\", price);\r\n        formDataReq.append(\"availableQuantity\", availableQuantity);\r\n        formDataReq.append(\"category\", category);\r\n        formDataReq.append(\"subCategories\", subCategories);\r\n        formDataReq.append(\"shippingProvider\", shippingProvider);\r\n        let oldImagesArray = []; //require to push all old images name which is string to an array before append to \"oldImages\", it will not automatically set as array unlike file datatype\r\n        //loop through imagestate, for newimages convert to file, old images, add to array and push add to formrequest after forEach\r\n        imageState.fileList.forEach((fileListItem, index) => {\r\n            if (fileListItem.dataUrl) {\r\n                let imageFileName = fileListItem.name + index + Math.floor(Date.now() / 1000); // imageFileName = imagename +timestamp\r\n                let imageFileBase64 = fileListItem.dataUrl; //image data in base64, use preview which give a better quality\r\n                let fileExtension = imageFileBase64.substring(\"data:image/\".length, imageFileBase64.indexOf(\";base64\"));//image extension\r\n                let file = dataURLtoFile(imageFileBase64, imageFileName + \".\" + fileExtension);//Convert imageData in base64 to image file format. The 1st parameter is the base64 string, second parameter is the filename\r\n                formDataReq.append(\"newImages\", file);\r\n            } else {\r\n                oldImagesArray.push(fileListItem.name);\r\n            }\r\n        });//end foreach\r\n        formDataReq.append(\"oldImages\", oldImagesArray);\r\n\r\n        //update function to backend\r\n        try {\r\n            const res = await updateProductFn(match.params.slug, formDataReq, user.token);\r\n            history.push(\"/admin/viewAllProducts\");\r\n            toast.success(res.data);\r\n        } catch (err) {\r\n            if (err.response.data.error === \"J01\") {\r\n                const rfAuthToken = getRefreshToken();\r\n                if (rfAuthToken) {\r\n                    try {\r\n                        const res2 = await refreshTokenFn(rfAuthToken);\r\n                        //update redux state\r\n                        dispatch({\r\n                            type: \"REFRESH_TOKEN\",\r\n                            payload: res2.data\r\n                        });\r\n                        const res3 = await updateProductFn(match.params.slug, formDataReq, res2.data.token);\r\n                        history.push(\"/admin/viewAllProducts\");\r\n                        toast.success(res3.data);\r\n                    } catch (err) { //2nd try still fail\r\n                        toast.error(err.response.data.error);\r\n                    }\r\n                }\r\n            } else { //fail not because of auth token\r\n                toast.error(err.response.data.error);\r\n            }\r\n        }\r\n    }\r\n\r\n    const uploadImageForm = () => {\r\n        return (\r\n            <div className=\"col-centered\">\r\n                <ImgCrop rotate>\r\n                    <Upload\r\n                        customRequest={dummyRequest} //always return ok, not exactly sure what is this\r\n                        listType=\"picture-card\"\r\n                        fileList={imageState.fileList}\r\n                        onPreview={handlePreview}\r\n                        onChange={handleImageChange}\r\n                    >\r\n                        {imageState.fileList.length >= 8 ? null : uploadButton()}\r\n                    </Upload>\r\n                </ImgCrop>\r\n                {/*Modal is for displaying the preview */}\r\n                <Modal\r\n                    visible={imageState.previewVisible}\r\n                    // title={imageState.previewTitle}\r\n                    footer={null}\r\n                    onCancel={handleModalCancel}\r\n                >\r\n                    <img alt={imageState.previewTitle} style={{ width: '100%' }} src={imageState.previewImage} />\r\n                </Modal>\r\n            </div>\r\n        )\r\n    };\r\n    //dummyRequest for that always return ok\r\n    const dummyRequest = ({ file, onSuccess }) => {\r\n        setTimeout(() => {\r\n            onSuccess(\"ok\");\r\n        }, 0);\r\n    };\r\n    //on preview clicked\r\n    const handlePreview = async file => {\r\n        if (!file.url && !file.preview) {\r\n            file.preview = await getBase64(file.originFileObj);\r\n        }\r\n        setImageState({\r\n            ...imageState,\r\n            previewImage: file.url || file.preview,\r\n            previewVisible: true,\r\n            previewTitle: file.name || file.url.substring(file.url.lastIndexOf('/') + 1),\r\n        })\r\n    };\r\n\r\n    //Adding/Removing image\r\n    const handleImageChange = async (data) => {\r\n        // if new file added, add dataUrl\r\n        if (data.file.originFileObj) {\r\n            const reader = new FileReader();\r\n            //onload takes a call back function, e.target.result will be the result return by readAsDataURL\r\n            reader.onload = e => {\r\n                data.file.dataUrl = e.target.result;\r\n                return setImageState({\r\n                    ...imageState,\r\n                    fileList: data.fileList\r\n                });\r\n            }\r\n            reader.readAsDataURL(data.file.originFileObj);\r\n        }\r\n        //for deleting old files update the state by replacing entire filelist\r\n        return setImageState({\r\n            ...imageState,\r\n            fileList: data.fileList\r\n        });\r\n    };\r\n\r\n    //upload button icon\r\n    const uploadButton = () => {\r\n        return <div>\r\n            <PlusOutlined />\r\n            <div style={{ marginTop: 8 }}>Upload</div>\r\n        </div>\r\n    }\r\n\r\n    //for preview cancel\r\n    const handleModalCancel = () => {\r\n        return setImageState({ ...imageState, previewVisible: false })\r\n    }\r\n\r\n    //render UI\r\n    return (<div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n            <AdminSideBar />\r\n        </div>\r\n        <div className=\"col-md-10\">\r\n            <MDBCard className=\"p-3 mt-5\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-8\">\r\n                        {updateProductForm()}\r\n                    </div>\r\n                    <div className=\"col-md-4\">\r\n                        {uploadImageForm()}\r\n                    </div>\r\n                </div>\r\n            </MDBCard>\r\n        </div>\r\n    </div>);\r\n}\r\n\r\nexport default UpdateProduct;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\ProductCard.js",["293","294","295"],"import React from \"react\";\r\nimport { MDBIcon, MDBCard, MDBBtn } from 'mdbreact';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addToCartFn } from \"../functions/cart\";\r\nimport getRefreshToken from \"../helper/getRefreshToken\";\r\nimport { refreshTokenFn } from \"../functions/auth\";\r\n\r\nconst ProductCard = ({ handleDelete, products, user }) => {\r\n    const dispatch = useDispatch();\r\n    const card = () => {\r\n        return (\r\n            <div className=\"row\">\r\n                {products.map(p => {\r\n                    return (\r\n                        <div className=\"col-md-3 mb-3 d-flex align-items-stretch\" key={p._id}>\r\n                            <div className=\"card\" style={{ height: '26rem' }}>\r\n                                <div className=\"view overlay\">\r\n                                    {/* <div> */}\r\n                                    {/* image here */}\r\n                                    <Link to={`/productDetails/${p.slug}`}>\r\n                                        <img\r\n                                            // style={{ height: '10rem' }} \r\n                                            src={`${process.env.REACT_APP_AWSS3DIR}/${p.images[0]}`} style={{ height: '15rem', objectFit: 'cover' }} className=\"card-img-top\" alt=\"\">\r\n                                        </img>\r\n                                    </Link>\r\n                                    <div className=\"card-body\">\r\n                                        <div className=\"font-weight-bolder\">\r\n                                            {p.name}\r\n                                        </div>\r\n                                        <div className=\"deep-orange-text\">\r\n                                            ${p.price}\r\n                                        </div>\r\n                                        <div className=\"font-weight-light\" style={{ fontSize: \"12px\" }}>\r\n                                            {p.description && p.description.length > 30 ? `${p.description.substring(0, 25)}...` : p.description}\r\n                                        </div>\r\n                                        <div className=\"mt-1\">\r\n                                            <span className=\"float-left mr-2 block\"><MDBIcon far icon=\"heart\" /></span>\r\n                                            <span className=\"block ml-3\"><MDBIcon far icon=\"star\" /><MDBIcon far icon=\"star\" /><MDBIcon far icon=\"star\" /><MDBIcon far icon=\"star\" /><MDBIcon far icon=\"star\" /></span>\r\n                                            <span className=\"float-right block mt-1\" style={{ fontSize: \"13px\" }}>{p.sold} sold</span>\r\n                                        </div>\r\n                                        <div>\r\n                                        </div>\r\n                                        {user && user.role == \"admin\" &&\r\n                                            <div className=\"mt-1\">\r\n                                                <MDBIcon\r\n                                                    onClick={() => handleDelete(p.slug)}\r\n                                                    className=\"float-right pt-1 text-danger\"\r\n                                                    style={{ cursor: 'pointer' }}\r\n                                                    far\r\n                                                    icon=\"trash-alt\" />\r\n\r\n                                                <Link to={`/admin/updateProduct/${p.slug}`}>\r\n                                                    <MDBIcon className=\"float-right pt-1 pr-3 text-warning\"\r\n                                                        style={{ cursor: 'pointer' }}\r\n                                                        far\r\n                                                        icon=\"edit\"\r\n                                                    // onClick={() => handleEdit(p.slug)}\r\n                                                    />\r\n                                                </Link>\r\n                                            </div>\r\n                                        }\r\n                                    </div>\r\n                                    <button type=\"button\" onClick={() => handleAddToCart(p)} className=\"d-block w-100 btn-warning\"><MDBIcon icon=\"cart-plus\" />Add To Cart</button>\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n    //if user logged in add to DB, else add to local storage\r\n    const handleAddToCart = async (product) => {\r\n        if (typeof window !== \"undefined\") { //check window object \r\n            if (user && user.email && user.token) { //user logged in\r\n                let productReq = {};\r\n                productReq.productID = product._id;\r\n                productReq.purchaseQuantity = 1;\r\n                try {\r\n                    const res = await addToCartFn(productReq, user.token);\r\n                    console.log(res);\r\n                    //add to redux store for Cart, CartModal and showModalProductReducer\r\n                    dispatch({\r\n                        type: \"ADD_TO_CART\",\r\n                        payload: res.data\r\n                    })\r\n                    dispatch({\r\n                        type: \"TOGGLE_CARTMODAL\",\r\n                        payload: true\r\n                    });\r\n                    dispatch({\r\n                        type: \"ADD_PRODUCT_TO_MODAL\",\r\n                        payload: product\r\n                    });\r\n                } catch (err) {\r\n                    console.log(err);\r\n                    if (err.response.data.error === \"J01\") {\r\n                        const rfAuthToken = getRefreshToken();\r\n                        if (rfAuthToken) {\r\n                            try {\r\n                                const res2 = await refreshTokenFn(rfAuthToken);\r\n                                //update redux state\r\n                                dispatch({\r\n                                    type: \"REFRESH_TOKEN\",\r\n                                    payload: res2.data\r\n                                });\r\n                                const res3 = await addToCartFn(productReq, res2.data.token);\r\n                                //add to redux store for Cart, CartModal and showModalProductReducer\r\n                                dispatch({\r\n                                    type: \"ADD_TO_CART\",\r\n                                    payload: res3.data\r\n                                })\r\n                                dispatch({\r\n                                    type: \"TOGGLE_CARTMODAL\",\r\n                                    payload: true\r\n                                });\r\n                                dispatch({\r\n                                    type: \"ADD_PRODUCT_TO_MODAL\",\r\n                                    payload: product\r\n                                });\r\n                            } catch (err) {\r\n\r\n                            }\r\n                        }\r\n                    } else { //fail not because of auth token\r\n                    }\r\n                }\r\n            }\r\n            else { //user NOT logged in\r\n                let cart = [];\r\n                if (localStorage.getItem(\"cart\")) {\r\n                    cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n                }\r\n                //add quantity to product\r\n                product.quantity = 1;\r\n                //check if product exist in cart, if exist append the quantity, else push as a new array\r\n                if (cart.length === 0) {\r\n                    cart.push({\r\n                        ...product\r\n                    });\r\n                } else {\r\n                    let itemExist = false;\r\n                    for (let i = 0; i < cart.length; i++) {\r\n                        if (cart[i]._id === product._id) {\r\n                            cart[i].quantity += 1;\r\n                            itemExist = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!itemExist) { //if item not found after forloop, push to storage\r\n                        cart.push({\r\n                            ...product\r\n                        });\r\n                    }\r\n                }\r\n                localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n                //add to redux store for Cart, CartModal and showModalProductReducer\r\n                dispatch({\r\n                    type: \"ADD_TO_CART\",\r\n                    payload: cart\r\n                })\r\n                dispatch({\r\n                    type: \"TOGGLE_CARTMODAL\",\r\n                    payload: true\r\n                });\r\n                dispatch({\r\n                    type: \"ADD_PRODUCT_TO_MODAL\",\r\n                    payload: product\r\n                });\r\n            }\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            {card()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductCard;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\LoadingCard.js",["296","297","298"],"import React from \"react\";\r\nimport { MDBIcon, MDBCard } from 'mdbreact';\r\nimport { Link } from \"react-router-dom\";\r\nimport { Skeleton, Card } from 'antd';\r\n\r\nconst LoadingCard = ({ numOfLoadingItems }) => {\r\n    const cards = () => {\r\n        let totalCards = [];\r\n        for (let i = 0; i < numOfLoadingItems; i++) {\r\n            totalCards.push(\r\n                <Card key={i} className=\"col-md-3\">\r\n                    <Skeleton active></Skeleton>\r\n                </Card>\r\n            )\r\n        }\r\n        return totalCards;\r\n    }\r\n    return <div className=\"row pb-5\">{cards()}</div>\r\n}\r\n\r\nexport default LoadingCard;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\LatestCookies.js",["299"],"import React, { useState, useEffect } from \"react\";\r\nimport { MDBCard } from 'mdbreact';\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport LoadingCard from \"../components/LoadingCard\";\r\nimport { getProductsBySearchFilterFn, getProductsCountFn } from \"../functions/product\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Pagination } from \"antd\";\r\n\r\nconst LatestCookies = () => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [page, setPage] = useState(1);\r\n    const [productCount, setProductCount] = useState(0);\r\n\r\n    const getProducts = async () => {\r\n        setLoading(true);\r\n        const res = await getProductsBySearchFilterFn(\"createdAt\", \"desc\", page);\r\n        setProducts(res.data);\r\n        setLoading(false);\r\n    }\r\n\r\n    const getProductsCount = async () => {\r\n        const res = await getProductsCountFn();\r\n        setProductCount(res.data);\r\n    }\r\n\r\n    useEffect(() => {\r\n        getProducts();\r\n    }, [page]);\r\n\r\n    useEffect(() => {\r\n        getProductsCount();\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <MDBCard className=\"p-3 mt-5\">\r\n                <h4 className=\"text-center p-3 font-weight-bold display-4\">Latest Cookies</h4>\r\n                {loading ?\r\n                    <div className=\"pt-5\">\r\n                        <LoadingCard\r\n                            numOfLoadingItems={4}\r\n                        />\r\n                    </div> :\r\n                    <div className=\"pt-5\">\r\n                        <ProductCard\r\n                            products={products}\r\n                            user={user}\r\n                        />\r\n                    </div>\r\n                }\r\n                <Pagination\r\n                    className=\"text-center mt-3\"\r\n                    current={page}\r\n                    defaultPageSize={4}\r\n                    total={productCount}\r\n                    onChange={(value) => {\r\n                        setPage(value)\r\n                    }}\r\n                />\r\n            </MDBCard>\r\n\r\n        </>\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default LatestCookies;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\BestSellers.js",["300"],"import React, { useState, useEffect } from \"react\";\r\nimport { MDBCard } from 'mdbreact';\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport LoadingCard from \"../components/LoadingCard\";\r\nimport { getProductsBySearchFilterFn,getProductsCountFn } from \"../functions/product\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Pagination } from \"antd\";\r\n\r\nconst BestSellers = () => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [page, setPage] = useState(1);\r\n    const [productCount, setProductCount] = useState(0);\r\n\r\n    const getProducts = async () => {\r\n        setLoading(true);\r\n        const res = await getProductsBySearchFilterFn(\"sold\", \"desc\", page);\r\n        setProducts(res.data);\r\n        setLoading(false);\r\n    }\r\n\r\n    const getProductsCount = async () => {\r\n        const res = await getProductsCountFn();\r\n        setProductCount(res.data);\r\n    }\r\n\r\n    useEffect(() => {\r\n        getProducts();\r\n    }, [page]);\r\n\r\n    useEffect(() => {\r\n        getProductsCount();\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <MDBCard className=\"p-3 mt-5\">\r\n                <h4 className=\"text-center p-3 font-weight-bold display-4\">Best Selling Cookies</h4>\r\n                {loading ?\r\n                    <div className=\"pt-5\">\r\n                        <LoadingCard\r\n                            numOfLoadingItems={4}\r\n                        />\r\n                    </div> :\r\n                    <div className=\"pt-5\">\r\n                        <ProductCard\r\n                            products={products}\r\n                            user={user}\r\n                        />\r\n                    </div>\r\n                }\r\n                <Pagination\r\n                    className=\"text-center mt-3\"\r\n                    current={page}\r\n                    defaultPageSize={4}\r\n                    total={productCount}\r\n                    onChange={(value) => {\r\n                        setPage(value)\r\n                    }}\r\n                />\r\n            </MDBCard>\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default BestSellers;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\ProductDetails.js",["301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325"],"import React, { useEffect, useState } from \"react\";\r\nimport { getProductFn, getRelatedProductsFn } from \"../functions/product\";\r\nimport { MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBAlert, MDBIcon } from 'mdbreact';\r\nimport { Link } from \"react-router-dom\";\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"; // requires a loader\r\nimport { Carousel } from 'react-responsive-carousel';\r\nimport { Image, Modal } from 'antd';\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addToCartFn } from \"../functions/cart\";\r\nimport getRefreshToken from \"../helper/getRefreshToken\";\r\nimport { refreshTokenFn } from \"../functions/auth\";\r\n\r\n//Initial State for form data to Server\r\nconst initialState = {\r\n    _id: \"\",\r\n    name: \"\",\r\n    slug: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    availableQuantity: \"\",\r\n    sold: \"\",\r\n    images: [],\r\n    ratings: [],\r\n    color: [],\r\n    category: {},\r\n    subCategories: [],\r\n    brand: \"\",\r\n    shippingProvider: [],\r\n}\r\nconst ProductDetails = ({ match }) => {\r\n    const { user, cart } = useSelector(state => {\r\n        return { ...state }\r\n    });\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [product, setProduct] = useState(initialState);\r\n    const { _id, name, slug, description, price, availableQuantity, sold, images, ratings, color, category, subCategories, brand, shippingProvider } = product;\r\n    const [relatedProducts, setRelatedProducts] = useState([]);\r\n    const { relatedName, relatedDescription, relatedPrice, relatedAvailableQuantity, relatedSold, relatedImages, relatedRatings, relatedColor, relatedCategory, relatedSubCategories, relatedBrand, relatedShippingProvider } = relatedProducts;\r\n    const [errorDetails, setErrorDetails] = useState(\"\");\r\n    const [quantity, setQuantity] = useState(1);\r\n    const [visible, setVisible] = useState(false);\r\n    const [largeImages, setLargeImages] = useState(false);\r\n    //get current product data \r\n    const getProduct = async () => {\r\n        try {\r\n            const res = await getProductFn(match.params.slug);\r\n            //only retrieve IDs for subcategory, shipping provider which will be easier to update on backend\r\n            setProduct(prevState => ({\r\n                ...prevState,\r\n                _id: res.data._id,\r\n                name: res.data.name,\r\n                slug: res.data.slug,\r\n                description: res.data.description,\r\n                price: res.data.price,\r\n                availableQuantity: res.data.availableQuantity,\r\n                sold: res.data.sold,\r\n                images: res.data.images,\r\n                ratings: res.data.ratings,\r\n                color: res.data.color,\r\n                category: res.data.category,\r\n                subCategories: res.data.subCategories,\r\n                brand: res.data.brand,\r\n                shippingProvider: res.data.shippingProvider,\r\n            }));\r\n            //Get Related Product\r\n            getRelatedProducts(res.data._id, res.data.category._id);\r\n        } catch (err) {\r\n            setErrorDetails(\"Product Not Found\");\r\n        }\r\n    }\r\n\r\n    const getRelatedProducts = async (productID, categoryID) => {\r\n        const res = await getRelatedProductsFn(productID, categoryID);\r\n        setRelatedProducts(res.data)\r\n    }\r\n    //when related product was click it will scroll to top\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n        getProduct();\r\n    }, [match.params.slug]);\r\n\r\n    const productDetailsForm = () => {\r\n        return (\r\n            <MDBCard className=\"p-2 mt-3\">\r\n\r\n                <Modal\r\n                    visible={visible}\r\n                    footer={null}\r\n                    onCancel={() => setVisible(false)}\r\n                >\r\n                    <img alt=\"example\" style={{ width: '100%' }} src={largeImages} />\r\n                </Modal>\r\n                <div className=\"row ml-1 mr-1\">\r\n                    {errorDetails && <h4 className=\"text-center text-danger\">{errorDetails}</h4>}\r\n                    <div className=\"col-md-6 mt-3\">\r\n                        <Carousel onClickItem={handleonClickItem} swipeable={true}>\r\n                            {images && images.map((image, i) => {\r\n                                return (<div key={i} style={{ height: \"500px\", objectFit: \"cover\" }}>\r\n                                    <img src={`${process.env.REACT_APP_AWSS3DIR}/${image}`} />\r\n                                </div>)\r\n                            })}\r\n                        </Carousel>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <h3 className=\"mt-4\">{name}</h3>\r\n\r\n                        <h3 className=\"text-danger mt-3\">${price}</h3>\r\n\r\n                        <div className=\"row mt-4\">\r\n                            <div className=\"col-md-3\">Sold:</div>\r\n                            <div className=\"col-md-9\">{sold}</div>\r\n                        </div>\r\n\r\n                        <div className=\"mt-4\">\r\n                            {shippingProvider && shippingProvider.map((sp, i) => {\r\n                                return (\r\n                                    <div className=\"row\" key={sp._id}>\r\n                                        <div className=\"col-md-3\">{i == 0 && \"Shipping\"}</div>\r\n                                        <div className=\"col-md-9\">{sp.name}</div>\r\n                                    </div>)\r\n                            })}\r\n                        </div>\r\n                        <div className=\"row mt-4\">\r\n                            <div className=\"col-md-3\">Quantity:</div>\r\n                            <div className=\"col-md-9 \">\r\n                                <div>\r\n                                    <input type=\"number\" min={1} name=\"quantity\" value={quantity} onChange={(e) => {\r\n                                        let value = e.target.value>availableQuantity?availableQuantity:e.target.value;\r\n                                        setQuantity(parseInt(value))\r\n                                    }} />\r\n                                    <span className=\"font-weight-light font-italic ml-3\">{availableQuantity} available</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"row mt-5\">\r\n                            <MDBBtn outline color=\"danger\" className=\"col-md-3 ml-3\" onClick={handleAddToCart}><MDBIcon icon=\"cart-plus\" />Add To Cart</MDBBtn>\r\n                            <MDBBtn color=\"danger\" className=\"col-md-3 ml-4 font-weight-bolder\">Buy Now</MDBBtn>\r\n                            <MDBBtn outline color=\"unique\" className=\"col-md-3 ml-4\"><MDBIcon far icon=\"heart\" />Add to WishList</MDBBtn>\r\n\r\n                        </div>\r\n                        <div className=\"row mt-4 \">\r\n                            <div style={{ fontSize: \"12px\", color: \"grey\" }} className=\"col-md-3 font-weight-light\">Category:</div>\r\n                            <div style={{ fontSize: \"12px\" }} className=\"col-md-9\"><Link to=\"\">{category.name}</Link></div>\r\n                        </div>\r\n                        <div className=\"row mt-4\">\r\n                            <div style={{ fontSize: \"12px\", color: \"grey\" }} className=\"col-md-3 font-weight-light\">Sub Categories:</div>\r\n                            <div style={{ fontSize: \"12px\" }} className=\"col-md-9\">{subCategories.map((sc, i) => {\r\n                                return i == 0 ? (<Link to=\"\" key={i}>{sc.name}</Link>) : (<Link to=\"\" key={i} className=\"ml-3\">{sc.name}</Link>)\r\n                            })}</div>\r\n                        </div>\r\n\r\n                        <MDBAlert color=\"secondary\" className=\"row mt-4 h5\">\r\n                            Product Description\r\n                    </MDBAlert>\r\n                        <div className=\"ml-1\">\r\n                            {description}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </MDBCard >\r\n        );\r\n    }\r\n    //enlarge image. e is the number of the carousell item\r\n    const handleonClickItem = e => {\r\n        setVisible(true);\r\n        setLargeImages(`${process.env.REACT_APP_AWSS3DIR}/${product.images[e]}`);\r\n    }\r\n\r\n    //Add To Cart if user log in, add to DB, else add to local storage\r\n    const handleAddToCart = async () => {\r\n       \r\n\r\n        if (typeof window !== \"undefined\") { //check window object \r\n            if (user && user.email && user.token) { //user logged in\r\n                let productReq = {};\r\n                productReq.productID = product._id;\r\n                productReq.purchaseQuantity = quantity;\r\n                try {\r\n                    console.log(\"!!!!!!!!!!!!!!!!!!!here\");\r\n                    const res = await addToCartFn(productReq, user.token);\r\n                    console.log(res.data);\r\n                    //add to redux store for Cart, CartModal and showModalProductReducer\r\n                    dispatch({\r\n                        type: \"ADD_TO_CART\",\r\n                        payload: res.data\r\n                    })\r\n                    dispatch({\r\n                        type: \"TOGGLE_CARTMODAL\",\r\n                        payload: true\r\n                    });\r\n                    dispatch({\r\n                        type: \"ADD_PRODUCT_TO_MODAL\",\r\n                        payload: product\r\n                    });\r\n                    //clear quantity state\r\n                    setQuantity(1);\r\n                } catch (err) {\r\n                    if (err.response.data.error === \"J01\") {\r\n                        const rfAuthToken = getRefreshToken();\r\n                        if (rfAuthToken) {\r\n                            try {\r\n                                const res2 = await refreshTokenFn(rfAuthToken);\r\n                                //update redux state\r\n                                dispatch({\r\n                                    type: \"REFRESH_TOKEN\",\r\n                                    payload: res2.data\r\n                                });\r\n                                const res3 = await addToCartFn(productReq, res2.data.token);\r\n                                //add to redux store for Cart, CartModal and showModalProductReducer\r\n                                dispatch({\r\n                                    type: \"ADD_TO_CART\",\r\n                                    payload: res3.data\r\n                                })\r\n                                dispatch({\r\n                                    type: \"TOGGLE_CARTMODAL\",\r\n                                    payload: true\r\n                                });\r\n                                dispatch({\r\n                                    type: \"ADD_PRODUCT_TO_MODAL\",\r\n                                    payload: product\r\n                                });\r\n                                //clear quantity state\r\n                                setQuantity(1);\r\n                            } catch (err) {\r\n\r\n                            }\r\n                        }\r\n                    } else { //fail not because of auth token\r\n                    }\r\n                }\r\n            }\r\n            else { //user NOT logged in\r\n                let cart = [];\r\n                if (localStorage.getItem(\"cart\")) {\r\n                    cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n                }\r\n                //add quantity to product\r\n                product.quantity = quantity;\r\n                //check if product exist in cart, if exist append the quantity, else push as a new array\r\n                if (cart.length === 0) {\r\n                    cart.push({\r\n                        ...product\r\n                    });\r\n                } else {\r\n                    let itemExist = false;\r\n                    for (let i = 0; i < cart.length; i++) {\r\n                        if (cart[i]._id === _id) {\r\n                            cart[i].quantity += quantity;\r\n                            itemExist = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!itemExist) { //if item not found after forloop, push to storage\r\n                        cart.push({\r\n                            ...product\r\n                        });\r\n                    }\r\n                }\r\n                localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n                //add to redux store for Cart, CartModal and showModalProductReducer\r\n                dispatch({\r\n                    type: \"ADD_TO_CART\",\r\n                    payload: cart\r\n                })\r\n                dispatch({\r\n                    type: \"TOGGLE_CARTMODAL\",\r\n                    payload: true\r\n                });\r\n                dispatch({\r\n                    type: \"ADD_PRODUCT_TO_MODAL\",\r\n                    payload: product\r\n                });\r\n                //clear quantity state\r\n                setQuantity(1);\r\n            }\r\n        }\r\n    }\r\n\r\n    const relatedProductsCard = () => {\r\n        return (\r\n            <MDBCard className=\"p-2 mt-3\">\r\n                <h4 className=\"mb-4\">You May Also Like</h4>\r\n                <ProductCard\r\n                    products={relatedProducts}\r\n                />\r\n            </MDBCard>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {productDetailsForm()}\r\n            {relatedProductsCard()}\r\n        </div>\r\n    )\r\n}\r\nexport default ProductDetails","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\searchReducer.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\SearchQuery.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\SubCategory.js",["326","327"],"import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { searchProductFn } from \"../functions/product\";\r\nimport {listSubCategoryFn} from \"../functions/subCategory\";\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport { MDBCard } from 'mdbreact';\r\nimport SearchSideBar from \"../components/nav/SearchSideBar\";\r\n\r\nconst SubCategory = ({match}) => {\r\n    const slug = match.params.slug;\r\n    let user = useSelector(state=> {\r\n        return state.user;\r\n    });\r\n\r\n    const [products, setProduct] = useState([]);\r\n    const [sortBy, setSortBy] = useState(\"topSales\");\r\n    const [subCategories,setSubCategories] = useState([]);\r\n    const [price, setPrice] = useState({min:0,max:0});\r\n    const [priceError, setPriceError] = useState(\"\");\r\n    const [starSelected, setStarSelected] = useState(0);\r\n    const [shippingProviders,setShippingProviders] = useState([]);\r\n\r\n    //If user manually type on the URL, make sure backend is call to fetch the result\r\n    useEffect(() => {\r\n        getSubCategoryID();\r\n    },[slug]);\r\n\r\n    //trigger tobackend when category, shipping provider, and sort changed\r\n    useEffect(() => {\r\n        searchProduct(null,sortBy, subCategories, price, shippingProviders);\r\n    }, [sortBy, subCategories, shippingProviders]);\r\n\r\n    //clear price, rating and shipping on subcategory change\r\n    useEffect(() => {\r\n        setPrice({min:0,max:0});\r\n        setPriceError(\"\");\r\n        setStarSelected(0);\r\n        setShippingProviders([]);\r\n    },[subCategories]);\r\n    \r\n    //get subcategory ID as slug is pass by name instead of ID.\r\n    const getSubCategoryID = async () => {\r\n        try{\r\n        const res = await listSubCategoryFn();\r\n            let allSubCategories = res.data;\r\n            let defaultSubCategory = allSubCategories.filter(subCategory => {\r\n                return subCategory.slug===slug\r\n            });        \r\n            let subcategoriesID= defaultSubCategory.map(sc=>{\r\n                return sc._id\r\n            });\r\n            setSubCategories(subcategoriesID);\r\n            \r\n        } catch (err) {\r\n        }\r\n    }\r\n\r\n    const searchProduct = async (keyword, sortBy, subCategories, price, shippingProviders) => {\r\n        try {\r\n            const res = await searchProductFn(keyword, sortBy, subCategories, price, shippingProviders);\r\n            setProduct(res.data);\r\n        } catch (err) {\r\n        }\r\n    }\r\n    \r\n    //All Search filters, by setting onchange it will trigger to useEffect which will make a call to backend and fetch new result\r\n    const handleSortByChange = e  => {\r\n        setSortBy(e.target.value);\r\n    }\r\n\r\n    const handleCategoryChange = e => {\r\n        setSubCategories(e);\r\n    }\r\n\r\n    const handlePrice =async e => {\r\n        setPriceError(\"\");\r\n        if( (price.min === 0 && price.max === 0) || (price.min > price.max) ) {\r\n            setPriceError(\"Please input valid price range\");\r\n        } else {\r\n            try {\r\n                searchProduct(null,sortBy,subCategories,price, shippingProviders);\r\n            } catch (err) {\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleStarClick = value => {\r\n        console.log(value);\r\n        setStarSelected(value);\r\n    }\r\n\r\n    const handleShippingProviderChange = e => {\r\n        setShippingProviders(e);\r\n    }\r\n    //End Handle Search\r\n    \r\n    return (\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                <SearchSideBar \r\n                        subCategories={subCategories}\r\n                        handleCategoryChange={handleCategoryChange}\r\n                        handlePrice={handlePrice}\r\n                        price={price}\r\n                        setPrice={setPrice}\r\n                        priceError={priceError}\r\n                        setPriceError={setPriceError}\r\n                        handleStarClick={handleStarClick}\r\n                        starSelected={starSelected}\r\n                        handleShippingProviderChange={handleShippingProviderChange}\r\n                        shippingProviders = {shippingProviders}\r\n                    />\r\n                </div>\r\n                <div className=\"col-md-10\">\r\n                {\r\n                subCategories.length>0 && products && products.length > 0 ?\r\n                            (\r\n                                <>\r\n                                    <h4 className=\"mt-3 mb-3\">{products.length} Search results</h4>\r\n                                    <div>Sort By : <select\r\n                                        className=\"custom-select w-25\"\r\n                                        name=\"SortBy\"\r\n                                        value={sortBy}\r\n                                        onChange={handleSortByChange}\r\n                                    >\r\n                                        {/* <option value=\"relevance\">Relevance</option> */}\r\n                                        <option value=\"topSales\">Top Sales</option>\r\n                                        <option value=\"priceLowToHigh\">Price Low to High</option>\r\n                                        <option value=\"priceHighToLow\">Price High to Low</option>\r\n                                    </select>\r\n                                    </div>\r\n                                    \r\n                                    <MDBCard className=\"p-3 mt-3\">\r\n                                        <ProductCard\r\n                                            products={products}\r\n                                            user={user}\r\n                                        />\r\n                                    </MDBCard>\r\n                                </>\r\n                            ) : (<h4 className=\"mt-3\">No product found</h4>)\r\n                }\r\n                </div>\r\n            </div>\r\n    )\r\n};\r\n\r\nexport default SubCategory;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\nav\\SearchSideBar.js",["328"],"import React, { useEffect, useState } from \"react\";\r\nimport { listSubCategoryFn } from \"../../functions/subCategory\";\r\nimport { Checkbox } from 'antd';\r\nimport StarRatings from \"react-star-ratings\";\r\nimport {shippingProvidersFn} from \"../../functions/shipping\";\r\n\r\nconst SearchSideBar = ({ subCategories, handleCategoryChange, handlePrice, price, setPrice, priceError, handleStarClick, starSelected,handleShippingProviderChange, shippingProviders }) => {\r\n    const [displaySubCategories, setDisplaySubCategories] = useState([]);\r\n    const [displayShippingProviders, setDisplayShippingProviders] = useState([]);\r\n\r\n    const listSubCategory = async () => {\r\n        const res = await listSubCategoryFn();\r\n        setDisplaySubCategories(res.data);\r\n    }\r\n\r\n    const listShippingProvider = async () => {\r\n        const res = await shippingProvidersFn();\r\n        setDisplayShippingProviders(res.data);\r\n    }\r\n\r\n    useEffect(() => {\r\n        listSubCategory();\r\n        listShippingProvider();\r\n    }, []);\r\n\r\n    const displayCategories = () => {\r\n        const options = displaySubCategories.map(subcategory => {\r\n            return {\r\n                label: subcategory.name,\r\n                value: subcategory._id\r\n            }\r\n        });\r\n        return (<Checkbox.Group options={options} value={subCategories} onChange={handleCategoryChange}></Checkbox.Group>);\r\n    }\r\n\r\n\r\n    const displayPriceRange = () => {\r\n        return (\r\n            <>\r\n                <input\r\n                    className=\"form-control-sm mr-sm-2\"\r\n                    style={{ width: \"40%\" }}\r\n                    type=\"number\"\r\n                    min={0}\r\n                    placeholder=\"Min\"\r\n                    value={price.min === 0 && price.max === 0 ? \"\" : price.min}\r\n                    onChange={e => {\r\n                        console.log(price);\r\n                        console.log(e);\r\n                        setPrice({\r\n                            ...price,\r\n                            min: e.target.value\r\n                        })\r\n                    }}\r\n                />\r\n             -\r\n                <input\r\n                    className=\"form-control-sm mr-sm-2 float-right\"\r\n                    style={{ width: \"40%\" }}\r\n                    type=\"number\"\r\n                    min={0}\r\n                    placeholder=\"Max\"\r\n                    value={price.min === 0 && price.max === 0 ? \"\" : price.max}\r\n                    onChange={e => {\r\n                        setPrice({\r\n                            ...price,\r\n                            max: e.target.value\r\n                        })\r\n                    }}\r\n                />\r\n                {priceError && <p className=\"text-danger\" style={{fontSize:\"11px\"}}>{priceError}</p>}\r\n                <button type=\"button\" className=\"btn btn-warning btn-sm btn-block\" onClick={handlePrice}>Apply</button>\r\n            </>\r\n        );\r\n    }\r\n\r\n    \r\n\r\n    const displayStarRating = (numOfStars) => {\r\n        return (\r\n            <StarRatings\r\n                rating={numOfStars}\r\n                starRatedColor=\"orange\"\r\n                numberOfStars={numOfStars}\r\n                starSpacing=\"2px\"\r\n                starDimension=\"20px\"\r\n            />\r\n        )\r\n    }\r\n\r\n    const displayShippingCheckBox = () => {\r\n        const options = displayShippingProviders.map(shippingProvider=>{\r\n            return {\r\n                label:shippingProvider.name,\r\n                value:shippingProvider._id\r\n            }\r\n        });\r\n        return (<Checkbox.Group options={options} value={shippingProviders} onChange={handleShippingProviderChange}></Checkbox.Group>);\r\n    }\r\n\r\n    return (\r\n        <div className=\"mt-3\">\r\n            <h5>Search Filter</h5>\r\n            <p>Category:</p>\r\n            {displayCategories()}\r\n            <hr />\r\n            <p>Price Range:</p>\r\n            {displayPriceRange()}\r\n            <hr />\r\n            <p className=\"mb-1\">Rating</p>\r\n            {/* {starSelected && starSelected === eachStart ? \"grey\" : \"none\"} */}\r\n            \r\n            {[5, 4, 3, 2, 1].map(eachStar => {\r\n                let selectedStarBG = \"\";\r\n                if(starSelected===eachStar) {\r\n                    selectedStarBG = \"grey\";\r\n                }\r\n                return <div key={eachStar}><span>\r\n                    <a\r\n                        onClick={() => handleStarClick(eachStar)}\r\n                        className=\"pb-1\"\r\n                        style={{\r\n                            cursor: \"pointer\",\r\n                            backgroundColor: selectedStarBG\r\n                        }}>\r\n                        {displayStarRating(eachStar)}\r\n                    </a>\r\n                </span></div>\r\n            })}\r\n            <hr />\r\n            <p>Shipping</p>\r\n            {displayShippingCheckBox()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SearchSideBar;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\pages\\Search.js",["329"],"import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { searchProductFn } from \"../functions/product\";\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport { MDBCard } from 'mdbreact';\r\nimport SearchSideBar from \"../components/nav/SearchSideBar\";\r\n\r\nconst Search = () => {\r\n    //grep redux search keyword\r\n    let keyword = useSelector(state => {\r\n        return state.search.keyword;\r\n    });\r\n   //grep redux user\r\n    let user = useSelector(state=> {\r\n        return state.user;\r\n    })\r\n\r\n    const [products, setProduct] = useState([]);\r\n    const [sortBy, setSortBy] = useState(\"relevance\");\r\n    const [subCategories,setSubCategories] = useState([]);\r\n    const [price, setPrice] = useState({min:0,max:0});\r\n    const [priceError, setPriceError] = useState(\"\");\r\n    const [starSelected, setStarSelected] = useState(0);\r\n    const [shippingProviders,setShippingProviders] = useState([]);\r\n\r\n    //clear filter when search keyword changed\r\n    useEffect(()=> {\r\n        setSubCategories([]);\r\n        setPrice({min:0,max:0});\r\n        setStarSelected(0);\r\n        setShippingProviders([]);\r\n    },[keyword]);\r\n\r\n    //settimeout 300ms so that not every keyword type will send a request to backend\r\n    useEffect(() => {\r\n        const delay = setTimeout(() => {\r\n            searchProduct(keyword, sortBy, subCategories, price, shippingProviders);\r\n        }, 300);\r\n        return () => clearTimeout(delay);\r\n    }, [keyword, sortBy, subCategories, shippingProviders]);\r\n\r\n    const searchProduct = async (keyword, sortBy, subCategories, price, shippingProviders) => {\r\n        try {\r\n            const res = await searchProductFn(keyword, sortBy, subCategories, price, shippingProviders);\r\n            setProduct(res.data);\r\n        } catch (err) {\r\n        }\r\n    }\r\n\r\n    //All Search filters, by setting onchange it will trigger to useEffect which will make a call to backend and fetch new result\r\n    const handleSortByChange = e  => {\r\n        setSortBy(e.target.value);\r\n    }\r\n\r\n    const handleCategoryChange = e => {\r\n        setSubCategories(e);\r\n    }\r\n\r\n    const handlePrice =async e => {\r\n        setPriceError(\"\");\r\n        if( (price.min === 0 && price.max === 0) || (price.min > price.max) ) {\r\n            setPriceError(\"Please input valid price range\");\r\n        } else {\r\n            try {\r\n                searchProduct(keyword,sortBy,subCategories,price, shippingProviders);\r\n                \r\n            } catch (err) {\r\n                \r\n            }\r\n        }\r\n    }\r\n    //todo pirority 2\r\n    const handleStarClick = value => {\r\n        console.log(value);\r\n        setStarSelected(value);\r\n    }\r\n\r\n    const handleShippingProviderChange = e => {\r\n        setShippingProviders(e);\r\n    }\r\n    //End Handle Search\r\n    \r\n\r\n    return (\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <SearchSideBar \r\n                        subCategories={subCategories}\r\n                        handleCategoryChange={handleCategoryChange}\r\n                        handlePrice={handlePrice}\r\n                        price={price}\r\n                        setPrice={setPrice}\r\n                        priceError={priceError}\r\n                        setPriceError={setPriceError}\r\n                        handleStarClick={handleStarClick}\r\n                        starSelected={starSelected}\r\n                        handleShippingProviderChange={handleShippingProviderChange}\r\n                        shippingProviders = {shippingProviders}\r\n                    />\r\n                </div>\r\n                <div className=\"col-md-10\">\r\n                {\r\n                products && products.length > 0 ?\r\n                            (\r\n                                <>\r\n                                    <h4 className=\"mt-3 mb-3\">{products.length} Search results for '{keyword}'</h4>\r\n                                    <div>Sort By : <select\r\n                                        className=\"custom-select w-25\"\r\n                                        name=\"SortBy\"\r\n                                        value={sortBy}\r\n                                        onChange={handleSortByChange}\r\n                                        \r\n                                    >\r\n                                        <option value=\"relevance\">Relevance</option>\r\n                                        <option value=\"topSales\">Top Sales</option>\r\n                                        <option value=\"priceLowToHigh\">Price Low to High</option>\r\n                                        <option value=\"priceHighToLow\">Price High to Low</option>\r\n                                    </select>\r\n                                    </div>\r\n                                    \r\n                                    <MDBCard className=\"p-3 mt-3\">\r\n                                        <ProductCard\r\n                                            products={products}\r\n                                            user={user}\r\n                                        />\r\n                                    </MDBCard>\r\n                                </>\r\n                            ) : (<h4 className=\"mt-3\">No product found for '{keyword}'</h4>)\r\n                }\r\n                </div>\r\n            </div>\r\n    )\r\n};\r\n\r\nexport default Search;","C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\cartReducer.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\cartModalReducer.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\components\\nav\\CartModal.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\reducers\\showModalProductReducer.js",[],"C:\\Users\\admin\\Desktop\\MumsCookyDev\\client\\src\\functions\\cart.js",[],{"ruleId":"330","replacedBy":"331"},{"ruleId":"332","replacedBy":"333"},{"ruleId":"334","severity":1,"message":"335","line":88,"column":9,"nodeType":"336","messageId":"337","endLine":88,"endColumn":18},{"ruleId":"338","severity":1,"message":"339","line":146,"column":6,"nodeType":"340","endLine":146,"endColumn":16,"suggestions":"341"},{"ruleId":"334","severity":1,"message":"342","line":1,"column":17,"nodeType":"336","messageId":"337","endLine":1,"endColumn":25},{"ruleId":"334","severity":1,"message":"343","line":1,"column":27,"nodeType":"336","messageId":"337","endLine":1,"endColumn":36},{"ruleId":"334","severity":1,"message":"344","line":2,"column":10,"nodeType":"336","messageId":"337","endLine":2,"endColumn":21},{"ruleId":"334","severity":1,"message":"345","line":3,"column":10,"nodeType":"336","messageId":"337","endLine":3,"endColumn":37},{"ruleId":"334","severity":1,"message":"346","line":4,"column":8,"nodeType":"336","messageId":"337","endLine":4,"endColumn":19},{"ruleId":"334","severity":1,"message":"347","line":5,"column":8,"nodeType":"336","messageId":"337","endLine":5,"endColumn":19},{"ruleId":"334","severity":1,"message":"348","line":7,"column":10,"nodeType":"336","messageId":"337","endLine":7,"endColumn":17},{"ruleId":"334","severity":1,"message":"349","line":10,"column":23,"nodeType":"336","messageId":"337","endLine":10,"endColumn":28},{"ruleId":"334","severity":1,"message":"350","line":10,"column":30,"nodeType":"336","messageId":"337","endLine":10,"endColumn":36},{"ruleId":"334","severity":1,"message":"351","line":29,"column":29,"nodeType":"336","messageId":"337","endLine":29,"endColumn":47},{"ruleId":"338","severity":1,"message":"352","line":80,"column":8,"nodeType":"340","endLine":80,"endColumn":14,"suggestions":"353"},{"ruleId":"338","severity":1,"message":"354","line":31,"column":8,"nodeType":"340","endLine":31,"endColumn":14,"suggestions":"355"},{"ruleId":"334","severity":1,"message":"356","line":96,"column":11,"nodeType":"336","messageId":"337","endLine":96,"endColumn":28},{"ruleId":"334","severity":1,"message":"357","line":1,"column":17,"nodeType":"336","messageId":"337","endLine":1,"endColumn":30},{"ruleId":"334","severity":1,"message":"358","line":9,"column":10,"nodeType":"336","messageId":"337","endLine":9,"endColumn":30},{"ruleId":"334","severity":1,"message":"359","line":18,"column":23,"nodeType":"336","messageId":"337","endLine":18,"endColumn":35},{"ruleId":"334","severity":1,"message":"360","line":20,"column":22,"nodeType":"336","messageId":"337","endLine":20,"endColumn":33},{"ruleId":"338","severity":1,"message":"361","line":46,"column":7,"nodeType":"340","endLine":46,"endColumn":9,"suggestions":"362"},{"ruleId":"363","severity":1,"message":"364","line":119,"column":29,"nodeType":"365","endLine":119,"endColumn":98},{"ruleId":"338","severity":1,"message":"354","line":43,"column":8,"nodeType":"340","endLine":43,"endColumn":14,"suggestions":"366"},{"ruleId":"338","severity":1,"message":"367","line":61,"column":8,"nodeType":"340","endLine":61,"endColumn":10,"suggestions":"368"},{"ruleId":"338","severity":1,"message":"369","line":20,"column":8,"nodeType":"340","endLine":20,"endColumn":14,"suggestions":"370"},{"ruleId":"338","severity":1,"message":"354","line":32,"column":8,"nodeType":"340","endLine":32,"endColumn":14,"suggestions":"371"},{"ruleId":"338","severity":1,"message":"372","line":60,"column":8,"nodeType":"340","endLine":60,"endColumn":10,"suggestions":"373"},{"ruleId":"338","severity":1,"message":"369","line":20,"column":7,"nodeType":"340","endLine":20,"endColumn":14,"suggestions":"374"},{"ruleId":"338","severity":1,"message":"375","line":63,"column":8,"nodeType":"340","endLine":63,"endColumn":14,"suggestions":"376"},{"ruleId":"330","replacedBy":"377"},{"ruleId":"332","replacedBy":"378"},{"ruleId":"334","severity":1,"message":"379","line":3,"column":141,"nodeType":"336","messageId":"337","endLine":3,"endColumn":149},{"ruleId":"334","severity":1,"message":"380","line":75,"column":58,"nodeType":"336","messageId":"337","endLine":75,"endColumn":62},{"ruleId":"334","severity":1,"message":"381","line":75,"column":64,"nodeType":"336","messageId":"337","endLine":75,"endColumn":70},{"ruleId":"334","severity":1,"message":"382","line":75,"column":72,"nodeType":"336","messageId":"337","endLine":75,"endColumn":79},{"ruleId":"334","severity":1,"message":"383","line":75,"column":81,"nodeType":"336","messageId":"337","endLine":75,"endColumn":86},{"ruleId":"334","severity":1,"message":"384","line":75,"column":113,"nodeType":"336","messageId":"337","endLine":75,"endColumn":118},{"ruleId":"334","severity":1,"message":"385","line":3,"column":10,"nodeType":"336","messageId":"337","endLine":3,"endColumn":17},{"ruleId":"334","severity":1,"message":"348","line":3,"column":19,"nodeType":"336","messageId":"337","endLine":3,"endColumn":26},{"ruleId":"334","severity":1,"message":"386","line":8,"column":10,"nodeType":"336","messageId":"337","endLine":8,"endColumn":24},{"ruleId":"334","severity":1,"message":"387","line":10,"column":10,"nodeType":"336","messageId":"337","endLine":10,"endColumn":14},{"ruleId":"334","severity":1,"message":"388","line":74,"column":11,"nodeType":"336","messageId":"337","endLine":74,"endColumn":21},{"ruleId":"334","severity":1,"message":"380","line":83,"column":58,"nodeType":"336","messageId":"337","endLine":83,"endColumn":62},{"ruleId":"334","severity":1,"message":"381","line":83,"column":64,"nodeType":"336","messageId":"337","endLine":83,"endColumn":70},{"ruleId":"334","severity":1,"message":"382","line":83,"column":72,"nodeType":"336","messageId":"337","endLine":83,"endColumn":79},{"ruleId":"334","severity":1,"message":"383","line":83,"column":81,"nodeType":"336","messageId":"337","endLine":83,"endColumn":86},{"ruleId":"334","severity":1,"message":"384","line":83,"column":113,"nodeType":"336","messageId":"337","endLine":83,"endColumn":118},{"ruleId":"334","severity":1,"message":"389","line":89,"column":13,"nodeType":"336","messageId":"337","endLine":89,"endColumn":25},{"ruleId":"338","severity":1,"message":"390","line":181,"column":8,"nodeType":"340","endLine":181,"endColumn":10,"suggestions":"391"},{"ruleId":"334","severity":1,"message":"348","line":2,"column":19,"nodeType":"336","messageId":"337","endLine":2,"endColumn":26},{"ruleId":"334","severity":1,"message":"392","line":2,"column":28,"nodeType":"336","messageId":"337","endLine":2,"endColumn":34},{"ruleId":"393","severity":1,"message":"394","line":44,"column":60,"nodeType":"395","messageId":"396","endLine":44,"endColumn":62},{"ruleId":"334","severity":1,"message":"385","line":2,"column":10,"nodeType":"336","messageId":"337","endLine":2,"endColumn":17},{"ruleId":"334","severity":1,"message":"348","line":2,"column":19,"nodeType":"336","messageId":"337","endLine":2,"endColumn":26},{"ruleId":"334","severity":1,"message":"387","line":3,"column":10,"nodeType":"336","messageId":"337","endLine":3,"endColumn":14},{"ruleId":"338","severity":1,"message":"397","line":30,"column":8,"nodeType":"340","endLine":30,"endColumn":14,"suggestions":"398"},{"ruleId":"338","severity":1,"message":"397","line":30,"column":8,"nodeType":"340","endLine":30,"endColumn":14,"suggestions":"399"},{"ruleId":"334","severity":1,"message":"400","line":3,"column":10,"nodeType":"336","messageId":"337","endLine":3,"endColumn":16},{"ruleId":"334","severity":1,"message":"401","line":3,"column":18,"nodeType":"336","messageId":"337","endLine":3,"endColumn":24},{"ruleId":"334","severity":1,"message":"402","line":3,"column":26,"nodeType":"336","messageId":"337","endLine":3,"endColumn":34},{"ruleId":"334","severity":1,"message":"403","line":7,"column":10,"nodeType":"336","messageId":"337","endLine":7,"endColumn":15},{"ruleId":"334","severity":1,"message":"404","line":32,"column":19,"nodeType":"336","messageId":"337","endLine":32,"endColumn":23},{"ruleId":"334","severity":1,"message":"405","line":39,"column":24,"nodeType":"336","messageId":"337","endLine":39,"endColumn":28},{"ruleId":"334","severity":1,"message":"382","line":39,"column":83,"nodeType":"336","messageId":"337","endLine":39,"endColumn":90},{"ruleId":"334","severity":1,"message":"383","line":39,"column":92,"nodeType":"336","messageId":"337","endLine":39,"endColumn":97},{"ruleId":"334","severity":1,"message":"384","line":39,"column":124,"nodeType":"336","messageId":"337","endLine":39,"endColumn":129},{"ruleId":"334","severity":1,"message":"406","line":41,"column":13,"nodeType":"336","messageId":"337","endLine":41,"endColumn":24},{"ruleId":"334","severity":1,"message":"407","line":41,"column":26,"nodeType":"336","messageId":"337","endLine":41,"endColumn":44},{"ruleId":"334","severity":1,"message":"408","line":41,"column":46,"nodeType":"336","messageId":"337","endLine":41,"endColumn":58},{"ruleId":"334","severity":1,"message":"409","line":41,"column":60,"nodeType":"336","messageId":"337","endLine":41,"endColumn":84},{"ruleId":"334","severity":1,"message":"410","line":41,"column":86,"nodeType":"336","messageId":"337","endLine":41,"endColumn":97},{"ruleId":"334","severity":1,"message":"411","line":41,"column":99,"nodeType":"336","messageId":"337","endLine":41,"endColumn":112},{"ruleId":"334","severity":1,"message":"412","line":41,"column":114,"nodeType":"336","messageId":"337","endLine":41,"endColumn":128},{"ruleId":"334","severity":1,"message":"413","line":41,"column":130,"nodeType":"336","messageId":"337","endLine":41,"endColumn":142},{"ruleId":"334","severity":1,"message":"414","line":41,"column":144,"nodeType":"336","messageId":"337","endLine":41,"endColumn":159},{"ruleId":"334","severity":1,"message":"415","line":41,"column":161,"nodeType":"336","messageId":"337","endLine":41,"endColumn":181},{"ruleId":"334","severity":1,"message":"416","line":41,"column":183,"nodeType":"336","messageId":"337","endLine":41,"endColumn":195},{"ruleId":"334","severity":1,"message":"417","line":41,"column":197,"nodeType":"336","messageId":"337","endLine":41,"endColumn":220},{"ruleId":"338","severity":1,"message":"390","line":83,"column":8,"nodeType":"340","endLine":83,"endColumn":27,"suggestions":"418"},{"ruleId":"419","severity":1,"message":"420","line":102,"column":37,"nodeType":"365","endLine":102,"endColumn":95},{"ruleId":"393","severity":1,"message":"394","line":121,"column":70,"nodeType":"395","messageId":"396","endLine":121,"endColumn":72},{"ruleId":"393","severity":1,"message":"394","line":151,"column":42,"nodeType":"395","messageId":"396","endLine":151,"endColumn":44},{"ruleId":"338","severity":1,"message":"421","line":26,"column":7,"nodeType":"340","endLine":26,"endColumn":13,"suggestions":"422"},{"ruleId":"338","severity":1,"message":"423","line":31,"column":8,"nodeType":"340","endLine":31,"endColumn":50,"suggestions":"424"},{"ruleId":"363","severity":1,"message":"364","line":119,"column":21,"nodeType":"365","endLine":125,"endColumn":28},{"ruleId":"338","severity":1,"message":"423","line":40,"column":8,"nodeType":"340","endLine":40,"endColumn":59,"suggestions":"425"},"no-native-reassign",["426"],"no-negated-in-lhs",["427"],"no-unused-vars","'cartCheck' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'userCheck'. Either include it or remove the dependency array.","ArrayExpression",["428"],"'useState' is defined but never used.","'useEffect' is defined but never used.","'useSelector' is defined but never used.","'getProductsBySearchFilterFn' is defined but never used.","'ProductCard' is defined but never used.","'LoadingCard' is defined but never used.","'MDBCard' is defined but never used.","'Modal' is defined but never used.","'Button' is defined but never used.","'setCurrentSelected' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'history.location.state' and 'roleBasedRedirect'. Either include them or remove the dependency array.",["429"],"React Hook useEffect has a missing dependency: 'roleBasedRedirect'. Either include it or remove the dependency array.",["430"],"'registerFormPhone' is assigned a value but never used.","'createContext' is defined but never used.","'getProductQuantityFn' is defined but never used.","'setPromoCode' is assigned a value but never used.","'setDiscount' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'getDBProductQuantity' and 'user'. Either include them or remove the dependency array.",["431"],"jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement",["432"],"React Hook useEffect has missing dependencies: 'activateAccount' and 'match.params.token'. Either include them or remove the dependency array.",["433"],"React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["434"],["435"],"React Hook useEffect has missing dependencies: 'match.params.token' and 'resetPassword'. Either include them or remove the dependency array.",["436"],["437"],"React Hook useEffect has a missing dependency: 'adminCheck'. Either include it or remove the dependency array.",["438"],["426"],["427"],"'MDBBadge' is defined but never used.","'sold' is assigned a value but never used.","'images' is assigned a value but never used.","'ratings' is assigned a value but never used.","'color' is assigned a value but never used.","'brand' is assigned a value but never used.","'MDBIcon' is defined but never used.","'ToastContainer' is defined but never used.","'Link' is defined but never used.","'handleEdit' is assigned a value but never used.","'showCategory' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'getProduct'. Either include it or remove the dependency array.",["439"],"'MDBBtn' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","React Hook useEffect has a missing dependency: 'getProducts'. Either include it or remove the dependency array.",["440"],["441"],"'MDBRow' is defined but never used.","'MDBCol' is defined but never used.","'MDBInput' is defined but never used.","'Image' is defined but never used.","'cart' is assigned a value but never used.","'slug' is assigned a value but never used.","'relatedName' is assigned a value but never used.","'relatedDescription' is assigned a value but never used.","'relatedPrice' is assigned a value but never used.","'relatedAvailableQuantity' is assigned a value but never used.","'relatedSold' is assigned a value but never used.","'relatedImages' is assigned a value but never used.","'relatedRatings' is assigned a value but never used.","'relatedColor' is assigned a value but never used.","'relatedCategory' is assigned a value but never used.","'relatedSubCategories' is assigned a value but never used.","'relatedBrand' is assigned a value but never used.","'relatedShippingProvider' is assigned a value but never used.",["442"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","React Hook useEffect has a missing dependency: 'getSubCategoryID'. Either include it or remove the dependency array.",["443"],"React Hook useEffect has a missing dependency: 'price'. Either include it or remove the dependency array.",["444"],["445"],"no-global-assign","no-unsafe-negation",{"desc":"446","fix":"447"},{"desc":"448","fix":"449"},{"desc":"450","fix":"451"},{"desc":"452","fix":"453"},{"desc":"450","fix":"454"},{"desc":"455","fix":"456"},{"desc":"457","fix":"458"},{"desc":"450","fix":"459"},{"desc":"460","fix":"461"},{"desc":"462","fix":"463"},{"desc":"464","fix":"465"},{"desc":"466","fix":"467"},{"desc":"468","fix":"469"},{"desc":"468","fix":"470"},{"desc":"471","fix":"472"},{"desc":"473","fix":"474"},{"desc":"475","fix":"476"},{"desc":"477","fix":"478"},"Update the dependencies array to be: [dispatch, userCheck]",{"range":"479","text":"480"},"Update the dependencies array to be: [history.location.state, roleBasedRedirect, user]",{"range":"481","text":"482"},"Update the dependencies array to be: [roleBasedRedirect, user]",{"range":"483","text":"484"},"Update the dependencies array to be: [getDBProductQuantity, user]",{"range":"485","text":"486"},{"range":"487","text":"484"},"Update the dependencies array to be: [activateAccount, match.params.token]",{"range":"488","text":"489"},"Update the dependencies array to be: [history, user]",{"range":"490","text":"491"},{"range":"492","text":"484"},"Update the dependencies array to be: [match.params.token, resetPassword]",{"range":"493","text":"494"},"Update the dependencies array to be: [count, history]",{"range":"495","text":"496"},"Update the dependencies array to be: [adminCheck, user]",{"range":"497","text":"498"},"Update the dependencies array to be: [getProduct]",{"range":"499","text":"500"},"Update the dependencies array to be: [getProducts, page]",{"range":"501","text":"502"},{"range":"503","text":"502"},"Update the dependencies array to be: [getProduct, match.params.slug]",{"range":"504","text":"505"},"Update the dependencies array to be: [getSubCategoryID, slug]",{"range":"506","text":"507"},"Update the dependencies array to be: [sortBy, subCategories, shippingProviders, price]",{"range":"508","text":"509"},"Update the dependencies array to be: [keyword, sortBy, subCategories, shippingProviders, price]",{"range":"510","text":"511"},[4760,4770],"[dispatch, userCheck]",[2857,2863],"[history.location.state, roleBasedRedirect, user]",[1068,1074],"[roleBasedRedirect, user]",[1598,1600],"[getDBProductQuantity, user]",[1372,1378],[1972,1974],"[activateAccount, match.params.token]",[722,728],"[history, user]",[1088,1094],[1900,1902],"[match.params.token, resetPassword]",[610,617],"[count, history]",[2261,2267],"[adminCheck, user]",[7335,7337],"[getProduct]",[1077,1083],"[getProducts, page]",[1069,1075],[3478,3497],"[getProduct, match.params.slug]",[1069,1075],"[getSubCategoryID, slug]",[1265,1307],"[sortBy, subCategories, shippingProviders, price]",[1483,1534],"[keyword, sortBy, subCategories, shippingProviders, price]"]